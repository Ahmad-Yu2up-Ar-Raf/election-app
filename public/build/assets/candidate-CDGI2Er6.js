import{R as o,j as e,m,t as d}from"./app-CXSJomay.js";import{D as S,a as N,b as C,h as x,m as D,e as b,A as k,f as y,n as w,S as A,j as I,k as M,l as E}from"./site-header-j6zwA2q1.js";import{E as F,D as K,s as R}from"./data-DE6Eb4qd.js";import{D as T,B as g}from"./delete-tasks-dialog-Cl8jktGP.js";import{C as h}from"./checkbox-5m2yZAWG.js";import{D as p}from"./data-table-column-header-U78k7DyB.js";import{B as P}from"./button-BOrXaaHL.js";import{U as B,M as O,V as H,C as U}from"./calon-update-sheet-CvxCFb4t.js";import{I as z,a as V}from"./textarea-DfypchEb.js";import"./index-xWzCG7Mf.js";import"./index-DzqxQxQ0.js";import"./package-BmvjVGM4.js";import"./label-_Kkhdhia.js";import"./chevron-down-uaI6_Agi.js";import"./search-Bd5CV4Tl.js";import"./dialog-_Qg0JGmS.js";import"./eye-off-CkhO-Ob2.js";import"./form-URyGwK2E.js";function _({row:a,election:s}){const t=a.original,[l,n]=o.useState(!1),[u,c]=o.useState(!1),[j,i]=o.useState(!1),f=v=>{try{i(!0),m.delete(route("dashboard.candidate.destroy",v),{preserveScroll:!0,preserveState:!0,onBefore:()=>{i(!0)},onSuccess:()=>{d.success("Election deleted successfully"),c(!1),m.reload()},onError:r=>{console.error("Delete error:",r),d.error((r==null?void 0:r.message)||"Failed to delete the election")},onFinish:()=>{i(!1)}})}catch(r){console.error("Delete operation error:",r),d.error("An unexpected error occurred"),i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsx(N,{asChild:!0,children:e.jsxs(P,{variant:"ghost",size:"icon",className:"data-[state=open]:bg-muted size-8",children:[e.jsx(F,{}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(C,{align:"end",className:"w-[160px]",children:[e.jsx(x,{onSelect:()=>n(!0),children:"Edit"}),e.jsxs(x,{variant:"destructive",onSelect:()=>c(!0),children:["Delete",e.jsx(D,{children:"⌘⌫"})]})]})]}),e.jsx(B,{elections:s,task:t,open:l,onOpenChange:n}),e.jsx(T,{handledeDelete:f,processing:j,trigger:!1,students:t,open:u,onOpenChange:c})]})}const L=[{id:"select",header:({table:a})=>e.jsx("div",{className:"flex items-center  w-14 justify-center",children:e.jsx(h,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>a.toggleAllPageRowsSelected(!!s),"aria-label":"Select all"})}),cell:({row:a})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(h,{checked:a.getIsSelected(),onCheckedChange:s=>a.toggleSelected(!!s),"aria-label":"Select row"})}),enableSorting:!1,enableHiding:!1},{accessorKey:"nama",header:({column:a})=>e.jsx(p,{column:a,title:"nama"}),cell:({row:a})=>{const s=b();return e.jsxs("div",{className:"flex items-center w-45 gap-4  ",children:[e.jsxs(k,{className:"  relative flex size-10 shrink-0 overflow-hidden rounded-full",children:[e.jsx(y,{src:a.original.picture,alt:a.original.nama}),e.jsx(w,{className:"rounded-lg  bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:s(a.original.nama)})]}),a.original.nama]})},enableHiding:!1},{accessorKey:"Election",header:"Election",cell:({row:a})=>{var s;return e.jsx("div",{className:"w-40",children:(s=a.original.elections)==null?void 0:s.title})}},{accessorKey:"voters",header:({column:a})=>e.jsx(p,{column:a,title:"voters"}),cell:({row:a})=>e.jsx("div",{className:"flex w-32 items-center gap-2",children:e.jsx("span",{children:a.original.votes_count})}),filterFn:(a,s,t)=>t.includes(a.getValue(s))},{accessorKey:"Class",header:"Class",cell:({row:a})=>e.jsx("div",{className:"w-32",children:a.original.kelas})},{accessorKey:"gender",header:"gender",cell:({row:a})=>e.jsx("div",{className:"w-32",children:e.jsxs(g,{variant:"outline",className:"text-muted-foreground px-1.5",children:[a.original.gender==="male"?e.jsx(O,{}):e.jsx(H,{}),a.original.gender]})})},{accessorKey:"status",header:"Status",cell:({row:a})=>e.jsx("div",{className:" w-32",children:e.jsxs(g,{variant:"outline",className:"text-muted-foreground px-1.5",children:[a.original.status==="active"?e.jsx(z,{className:"fill-green-500 dark:fill-green-400"}):e.jsx(V,{}),a.original.status]})})},{accessorKey:"Created At",header:"Created At",cell:({row:a})=>e.jsx("div",{className:"w-20",children:a.original.created_at?new Date(a.original.created_at).toLocaleDateString():"N/A"})},{id:"actions",cell:({row:a,table:s})=>{var l;const t=((l=s.options.meta)==null?void 0:l.elections)||[];return e.jsx(e.Fragment,{children:e.jsx(_,{election:t,row:a})})}}];function oe({pagination:a,filters:s,flash:t,calon:l,elections:n}){return e.jsxs(A,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"calc(var(--spacing) * 12)"},children:[e.jsx(I,{variant:"inset"}),e.jsxs(M,{children:[e.jsx(E,{siteName:"Candidate"}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col px-5 gap-4 py-4 md:gap-6 md:py-6",children:[e.jsx("header",{className:"flex items-center justify-between space-y-1",children:e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Candidate Management"})}),e.jsx(K,{nas:"nama",createComponent:e.jsx(U,{elections:n}),option:R,data:l,columns:L,pagination:a,filters:s,elections:n})]})})})]})]})}export{oe as default};
