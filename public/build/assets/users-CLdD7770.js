import{j as e,r as f,t as m,m as D,R as A}from"./app-DD5dILCN.js";import{d as R,f as M,g as E,h as H,i as L,j as V,k as B,D as k,l as ee,m as se,n as T,o as ae,u as re,p as le,q as ne,r as te,H as oe,e as ie,S as de,A as ce,a as me,b as xe}from"./site-header-C5IQCGgE.js";import{S as pe,a as ue,b as he,c as je,d as fe,E as ge,m as be,B as we,l as U,D as Ne,r as ye}from"./delete-tasks-dialog-DGjDZ4kV.js";import{C as I}from"./checkbox-C9T1cDnw.js";import{a as Se,c as z,B as i}from"./button-DpV8H5g9.js";import{F as ve,a as w,b as N,c as y,d as S,e as v,f as C,u as $,s as q,j as Ce,k as De}from"./form-BOzyVGVs.js";import{I as O}from"./label-BrTgKEKN.js";import{P as _}from"./password-input-BrRcK-tx.js";import{u as K}from"./index-CShOjS3G.js";import{L as p,D as Y,b as G,c as J,d as Q,e as W,f as X,g as Z,a as Fe}from"./drawer-Bmae5m0h.js";import"./index-BMvYszvE.js";import"./index-5N8s4Moj.js";import"./index-D80Sa9_x.js";import"./package-CE6PuMnR.js";import"./search-C6jeyDFT.js";import"./dialog-CRGxpWZA.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ze=Se("User",Ae);function F({form:s,onSubmit:r,isUpdated:h=!1,children:x,currentEmployee:a,isPending:t}){const j=["admind","user"];return e.jsx(ve,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(r),className:"flex overflow-y-scroll pt-6 md:pt-0 md:overflow-y-visible flex-col gap-4 px-0",children:[e.jsx("main",{className:"space-y-6 mb-6",children:e.jsxs("section",{className:"space-y-10  pb-8 pt-2 px-4 sm:px-6",children:[e.jsx(w,{control:s.control,name:"name",defaultValue:a==null?void 0:a.name,render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{className:z(t&&"text-muted-foreground"),children:"Name"}),e.jsx(S,{children:e.jsx(O,{placeholder:"Admind name",type:"text",disabled:t,...l})}),e.jsx(v,{children:"Your admind full name."}),e.jsx(C,{})]})}),e.jsx(w,{control:s.control,name:"email",defaultValue:a==null?void 0:a.email,render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{className:z(t&&"text-muted-foreground"),children:"Email"}),e.jsx(S,{children:e.jsx(O,{placeholder:"Email admind",type:"email",disabled:t,...l})}),e.jsx(v,{children:"Your admind email."}),e.jsx(C,{})]})}),!h&&e.jsxs(e.Fragment,{children:[e.jsx(w,{control:s.control,name:"password",defaultValue:a==null?void 0:a.email,render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{children:"Password"}),e.jsx(S,{children:e.jsx(_,{placeholder:"Password",...l})}),e.jsx(v,{children:"Enter your password."}),e.jsx(C,{})]})}),e.jsx(w,{control:s.control,name:"password_confirmation",render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{children:"Password"}),e.jsx(S,{children:e.jsx(_,{placeholder:"password confirmation",...l})}),e.jsx(v,{children:"Enter your password again."}),e.jsx(C,{})]})})]}),e.jsx(w,{control:s.control,name:"role",render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{className:z(t&&"text-muted-foreground"),children:"Role"}),e.jsxs(pe,{onValueChange:l.onChange,value:l.value||"",disabled:t,children:[e.jsx(S,{children:e.jsx(ue,{className:"capitalize w-full",children:e.jsx(he,{placeholder:"Select Role"})})}),e.jsx(je,{children:j.map(o=>e.jsx(fe,{value:o,className:"capitalize",children:o},o))})]}),e.jsx(v,{className:"sr-only",children:"User Role"}),e.jsx(C,{})]})})]})}),x]})})}function Pe({task:s,...r}){const[h,x]=f.useTransition(),[a,t]=f.useState(!1);window.location.pathname.split("/").filter(n=>n)[1];const l=$({resolver:q(Ce),defaultValues:{name:(s==null?void 0:s.name)||"",password:(s==null?void 0:s.password)||"",password_confirmation:(s==null?void 0:s.password_confirmation)||"",role:(s==null?void 0:s.role)||"",email:(s==null?void 0:s.email)||""}});f.useEffect(()=>{s&&l.reset({name:(s==null?void 0:s.name)||"",password:(s==null?void 0:s.password)||"",password_confirmation:(s==null?void 0:s.password_confirmation)||"",role:(s==null?void 0:s.role)||"",email:(s==null?void 0:s.email)||""})},[s,l]);function o(n){if(!(s!=null&&s.id)){m.error("Student ID is missing");return}console.log("Form input data:",n),t(!0),x(()=>{const d=new FormData;d.append("name",n.name),d.append("email",n.email),d.append("role",n.role),d.append("password",n.password),d.append("password_confirmation",n.password_confirmation),d.append("_method","PUT"),D.post(route("dashboard.users.update",{user:s.id}),d,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onBefore:c=>{console.log("Request about to start:",c)},onStart:c=>{console.log("Request started"),m.loading("Updating student data...",{id:"update-toast"})},onSuccess:c=>{var u;console.log("Success response:",c),t(!1),(u=r.onOpenChange)==null||u.call(r,!1),m.success("Student updated successfully",{id:"update-toast"}),l.reset()},onError:c=>{t(!1),console.error("Form submission error:",c),typeof c=="object"&&c!==null?Object.entries(c).forEach(([u,b])=>{Array.isArray(b)?b.forEach(P=>{m.error(`${u}: ${P}`,{id:"update-toast"}),l.setError(u,{type:"manual",message:P})}):typeof b=="string"&&(m.error(`${u}: ${b}`,{id:"update-toast"}),l.setError(u,{type:"manual",message:b}))}):m.error("Failed to update student data",{id:"update-toast"})},onFinish:()=>{t(!1),console.log("Request finished")}})})}return K()?e.jsx(Y,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(G,{className:"flex flex-col",children:[e.jsxs(J,{className:"text-left sm:px-6 space-y-1 bg-background z-40 p-4 border-b",children:[e.jsxs(Q,{className:"text-xl",children:["Update",e.jsx(i,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.name})]}),e.jsx(W,{className:"text-sm",children:"Fill in the details below to update the task"})]}),e.jsx(F,{form:l,isUpdated:!0,onSubmit:o,isPending:a,currentEmployee:s,children:e.jsxs(X,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx(Z,{disabled:a,asChild:!0,onClick:()=>l.reset(),children:e.jsxs(i,{disabled:a,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(p,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(i,{disabled:a,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[a&&e.jsx(p,{className:"animate-spin"}),"Update"]})]})})]})}):e.jsx(R,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(M,{className:"flex flex-col gap-6 overflow-y-scroll",children:[e.jsxs(E,{className:"text-left sm:px-6 space-y-1 bg-background z-40 sticky top-0 p-4 border-b",children:[e.jsxs(H,{className:"text-lg",children:["Update",e.jsx(i,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.name})]}),e.jsx(L,{className:"sr-only",children:"Fill in the details below to update the task"})]}),e.jsx(F,{form:l,onSubmit:o,isPending:a,currentEmployee:s,isUpdated:!0,children:e.jsxs(V,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx(B,{disabled:a,asChild:!0,onClick:()=>l.reset(),children:e.jsxs(i,{disabled:a,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(p,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(i,{disabled:a,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[a&&e.jsx(p,{className:"animate-spin"}),"Update"]})]})})]})})}function Te({row:s}){const r=s.original,[h,x]=A.useState(!1),[a,t]=A.useState(!1),[j,l]=A.useState(!1),o=g=>{try{l(!0),D.delete(route("dashboard.users.destroy",g),{preserveScroll:!0,preserveState:!0,onBefore:()=>{l(!0)},onSuccess:()=>{m.success("Election deleted successfully"),t(!1),D.reload()},onError:n=>{console.error("Delete error:",n),m.error((n==null?void 0:n.message)||"Failed to delete the election")},onFinish:()=>{l(!1)}})}catch(n){console.error("Delete operation error:",n),m.error("An unexpected error occurred"),l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(i,{variant:"ghost",size:"icon",className:"data-[state=open]:bg-muted size-8",children:[e.jsx(ge,{}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(se,{align:"end",className:"w-[160px]",children:[e.jsx(T,{onSelect:()=>x(!0),children:"Edit"}),e.jsxs(T,{variant:"destructive",onSelect:()=>t(!0),children:["Delete",e.jsx(ae,{children:"⌘⌫"})]})]})]}),e.jsx(Pe,{task:r,open:h,onOpenChange:x}),e.jsx(be,{handledeDelete:o,processing:j,trigger:!1,students:r,open:a,onOpenChange:t})]})}const Ue=[{id:"select",header:({table:s})=>e.jsx("div",{className:"flex items-center  w-14 justify-center",children:e.jsx(I,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:r=>s.toggleAllPageRowsSelected(!!r),"aria-label":"Select all"})}),cell:({row:s})=>e.jsx("div",{className:"flex items-center  w-14 justify-center",children:e.jsx(I,{checked:s.getIsSelected(),onCheckedChange:r=>s.toggleSelected(!!r),"aria-label":"Select row"})}),enableSorting:!1,enableHiding:!1},{accessorKey:"nama",header:"nama",cell:({row:s})=>{const r=re();return e.jsxs("div",{className:"flex items-center w-45 gap-4  ",children:[e.jsxs(le,{className:"  relative flex size-10 shrink-0 overflow-hidden rounded-full",children:[e.jsx(ne,{src:s.original.avatar,alt:s.original.name}),e.jsx(te,{className:"rounded-lg  h-full w-full text-center content-center bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:r(s.original.name)})]}),s.original.name]})},enableHiding:!1},{accessorKey:"Email",header:"Email",cell:({row:s})=>e.jsx("div",{className:"w-50",children:s.original.email})},{accessorKey:"role",header:"role",cell:({row:s})=>e.jsx("div",{className:"w-32",children:e.jsxs(we,{variant:"outline",className:"text-muted-foreground px-1.5",children:[s.original.role==="admind"?e.jsx(oe,{}):e.jsx(ze,{}),s.original.role]})})},{accessorKey:"Created At",header:"Created At",cell:({row:s})=>e.jsx("div",{className:"w-20",children:s.original.created_at?new Date(s.original.created_at).toLocaleDateString():"N/A"})},{id:"actions",cell:({row:s})=>e.jsx(e.Fragment,{children:e.jsx(Te,{row:s})})}];function Ie(){const[s,r]=f.useState(!1),[h,x]=f.useTransition(),[a,t]=f.useState(!1),j=K();window.location.pathname.split("/").filter(n=>n)[1];const o=$({mode:"onSubmit",defaultValues:{name:"",email:"",password:"",password_confirmation:"",role:"admind"},resolver:q(De)});function g(n){x(async()=>{t(!0);const d=new FormData;d.append("name",n.name),d.append("email",n.email),d.append("role",n.role),d.append("password",n.password),d.append("password_confirmation",n.password_confirmation),D.post(route("dashboard.users.store"),d,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onSuccess:()=>{o.reset(),r(!1),m.success("Calon created"),t(!1)},onError:c=>{console.error("Submit error:",c),m.error(`Error: ${Object.values(c).join(", ")}`),t(!1),o.reset()}})})}return j?e.jsxs(Y,{open:s,onOpenChange:r,modal:!0,children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(i,{variant:"outline",className:" bg-background",size:"sm",children:[e.jsx(U,{className:""}),e.jsx("span",{className:" sr-only",children:"Add New "})]})}),e.jsxs(G,{className:"flex flex-col  ",children:[e.jsxs(J,{className:"text-left sm:px-6 space-y-1 bg-background    p-4 border-b  ",children:[e.jsxs(Q,{className:" text-xl",children:["Add New ",e.jsx(i,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base",children:"Candidate"})," "]}),e.jsx(W,{className:" text-sm",children:"Fill in the details below to create a new task"})]}),e.jsx(F,{isPending:a,form:o,onSubmit:g,children:e.jsxs(X,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx(Z,{disabled:a,asChild:!0,onClick:()=>o.reset(),children:e.jsxs(i,{disabled:a,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(p,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(i,{type:"submit",disabled:a,className:"w-fit  !pointer-events-auto  dark:bg-primary  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[a&&e.jsx(p,{className:"animate-spin"}),"Add"]})]})})]})]}):e.jsxs(R,{open:s,onOpenChange:r,modal:!0,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(i,{variant:"outline",className:" text-sm  bg-background",size:"sm",children:[e.jsx(U,{className:" mr-3 "}),"Add New"]})}),e.jsxs(M,{className:"flex flex-col gap-6 overflow-y-scroll ",children:[e.jsxs(E,{className:"text-left sm:px-6 space-y-1 bg-background z-30  sticky top-0   p-4 border-b  ",children:[e.jsxs(H,{className:" text-lg",children:["Add New ",e.jsx(i,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base capitalize",children:"CUsers"})," "]}),e.jsx(L,{className:" sr-only",children:"Fill in the details below to create a new task"})]}),e.jsx(F,{isPending:a,form:o,onSubmit:g,children:e.jsxs(V,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx(B,{disabled:a,asChild:!0,onClick:()=>o.reset(),children:e.jsxs(i,{disabled:a,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(p,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(i,{disabled:a,type:"submit",className:"w-fit dark:bg-primary !pointer-events-auto  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[a&&e.jsx(p,{className:"animate-spin"}),"Add"]})]})})]})]})}function We({pagination:s,filters:r,flash:h,users:x}){return e.jsxs(de,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"calc(var(--spacing) * 12)"},children:[e.jsx(ce,{variant:"inset"}),e.jsxs(me,{children:[e.jsx(xe,{siteName:"Elections"}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col px-5 gap-4 py-4 md:gap-6 md:py-6",children:[e.jsxs("header",{className:"flex justify-start  flex-col   space-y-1",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Adminds Team  Management"}),e.jsx("p",{className:" text-muted-foreground",children:"U can make another user/admind account, and then all that account can CRUD ur data"})]}),e.jsx(Ne,{createComponent:e.jsx(Ie,{}),data:x,columns:Ue,pagination:s,filters:r,option:ye})]})})})]})]})}export{We as default};
