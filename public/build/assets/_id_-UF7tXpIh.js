import{r as l,j as t,m as L,t as k,R as z,$ as Q}from"./app-CXSJomay.js";import{u as B,m as P,M as W,a as Z,f as J,c as ee,b as T,i as te,d as U,J as ne,B as re,e as se,S as oe,g as f}from"./vote-button-Dba4yFF5.js";import{c as I}from"./button-BOrXaaHL.js";import{P as ie,T as ae}from"./bar-chart-BqIBxq9i.js";import{C as le}from"./chevron-down-uaI6_Agi.js";function X(e){const n=B(()=>P(e)),{isStatic:r}=l.useContext(W);if(r){const[,i]=l.useState(e);l.useEffect(()=>n.on("change",i),[])}return n}function q(e,n){const r=X(n()),i=()=>r.set(n());return i(),Z(()=>{const s=()=>J.preRender(i,!1,!0),a=e.map(c=>c.on("change",s));return()=>{a.forEach(c=>c()),ee(i)}}),r}function ce(e){T.current=[],e();const n=q(T.current,e);return T.current=void 0,n}function ue(...e){const n=!Array.isArray(e[0]),r=n?0:-1,i=e[0+r],s=e[1+r],a=e[2+r],c=e[3+r],o=te(s,a,c);return n?o(i):o}function G(e,n,r,i){if(typeof e=="function")return ce(e);const s=typeof n=="function"?n:ue(n,r,i);return Array.isArray(e)?_(e,s):_([e],([a])=>s(a))}function _(e,n){const r=B(()=>[]);return q(e,()=>{r.length=0;const i=e.length;for(let s=0;s<i;s++)r[s]=e[s].get();return n(r)})}function de(e,n,r){const i=e.get();let s=null,a=i,c;const o=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,m=()=>{s&&(s.stop(),s=null)},h=()=>{m(),s=new ne({keyframes:[O(e.get()),O(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:c})};e.attach((d,y)=>(a=d,c=g=>y(R(g,o)),J.postRender(h),e.get()),m);let x;return U(n)&&(x=n.on("change",d=>e.set(R(d,o))),e.on("destroy",x)),x}function R(e,n){return n?e+n:e}function O(e){return typeof e=="number"?e:parseFloat(e)}function me(e,n={}){const{isStatic:r}=l.useContext(W),i=()=>U(e)?e.get():e;if(r)return G(i);const s=X(i());return l.useInsertionEffect(()=>de(s,e,n),[s,JSON.stringify(n)]),s}const A=[{primary:"#262626",gradient:"linear-gradient(145deg, #262626, #171717)",text:"#FFFFFF"},{primary:"#171717",gradient:"linear-gradient(145deg, #171717, #000000)",text:"#FFFFFF"}];function H({Calon:e,election:n}){const[r,i]=l.useState(!1),s=l.useMemo(()=>Math.abs(e.id)%A.length,[e.id]),a=A[s],c=()=>{n.status==="ongoing"&&(i(!0),L.post(route("vote.store",n.id),{calon_id:e.id,election_id:n.id},{preserveScroll:!0,onSuccess:()=>{k.success("Vote berhasil!"),L.visit(route("vote.index"))},onError:o=>{k.error(o.message||"Gagal melakukan vote"),i(!1)},onFinish:()=>i(!1)}))};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative w-full max-w-xs h-[370px] overflow-hidden group mx-auto dark:bg-black bg-white dark:border-0 border rounded-lg dark:text-white text-black flex flex-col",style:{borderColor:a.primary},children:[t.jsx("div",{className:"w-full h-full",children:t.jsx("img",{src:`/${e.picture}`,alt:e.nama,width:400,height:500,className:"h-full w-full grayscale-100 group-hover:grayscale-0 scale-105 group-hover:scale-100 object-cover transition-all duration-300 rounded-md"})}),t.jsx("article",{className:"p-8 w-full h-full  z-10 absolute top-0 flex flex-col justify-end  opacity-0 group-hover:opacity-100 transition-all duration-300",style:{background:` ${a.primary}`},children:t.jsxs("div",{className:"translate-y-10 group-hover:translate-y-0 transition-all duration-300 space-y-2",children:[t.jsx("h1",{className:"md:text-2xl font-semibold",children:"Vision & Mision"}),t.jsx("p",{className:"  text-accent-foreground/90 text-sm   leading-5.5",children:e.visi}),n.status==="ongoing"&&t.jsx(re,{onClick:c,disabled:r,className:" px-5  mt-5  w-[9em]",children:r?"Processing...":"Vote Now"})]})}),t.jsxs("article",{className:"p-4 w-full h-[50%] flex flex-col justify-end  overflow-hidden  absolute bottom-0 rounded-b-md bg-gradient-to-t from-black  opacity-100 group-hover:opacity-0 group-hover:-bottom-4 transition-all duration-300",children:[t.jsx("h1",{className:"md:text-2xl font-semibold",children:e.nama}),t.jsx("p",{className:"sm:text-base text-sm",children:e.kelas})]})]})})}function D(e,n){let r;return(...i)=>{window.clearTimeout(r),r=window.setTimeout(()=>e(...i),n)}}function fe({debounce:e,scroll:n,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,c]=l.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=l.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),m=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,x=l.useRef(!1);l.useEffect(()=>(x.current=!0,()=>void(x.current=!1)));const[d,y,g]=l.useMemo(()=>{const u=()=>{if(!o.current.element)return;const{left:b,top:p,width:S,height:j,bottom:V,right:E,x:C,y:F}=o.current.element.getBoundingClientRect(),v={left:b,top:p,width:S,height:j,bottom:V,right:E,x:C,y:F};o.current.element instanceof HTMLElement&&i&&(v.height=o.current.element.offsetHeight,v.width=o.current.element.offsetWidth),Object.freeze(v),x.current&&!ge(o.current.lastBounds,v)&&c(o.current.lastBounds=v)};return[u,h?D(u,h):u,m?D(u,m):u]},[c,i,m,h]);function w(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(u=>u.removeEventListener("scroll",g,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function N(){o.current.element&&(o.current.resizeObserver=new s(g),o.current.resizeObserver.observe(o.current.element),n&&o.current.scrollContainers&&o.current.scrollContainers.forEach(u=>u.addEventListener("scroll",g,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const M=u=>{!u||u===o.current.element||(w(),o.current.element=u,o.current.scrollContainers=Y(u),N())};return xe(g,!!n),he(y),l.useEffect(()=>{w(),N()},[n,g,y]),l.useEffect(()=>w,[]),[M,a,d]}function he(e){l.useEffect(()=>{const n=e;return window.addEventListener("resize",n),()=>void window.removeEventListener("resize",n)},[e])}function xe(e,n){l.useEffect(()=>{if(n){const r=e;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[e,n])}function Y(e){const n=[];if(!e||e===document.body)return n;const{overflow:r,overflowX:i,overflowY:s}=window.getComputedStyle(e);return[r,i,s].some(a=>a==="auto"||a==="scroll")&&n.push(e),[...n,...Y(e.parentElement)]}const pe=["x","y","top","bottom","left","right","width","height"],ge=(e,n)=>pe.every(r=>e[r]===n[r]),K={type:"spring",stiffness:280,damping:18,mass:.3};function $({value:e,place:n}){const r=Math.floor(e/n)%10,i=P(r),s=me(i,K);return l.useEffect(()=>{s.set(r)},[s,r]),t.jsxs("div",{className:"relative inline-block  w-[1ch] overflow-x-visible overflow-y-clip leading-none tabular-nums",children:[t.jsx("div",{className:"invisible",children:"0"}),Array.from({length:10},(a,c)=>t.jsx(be,{mv:s,number:c},c))]})}function be({mv:e,number:n}){const r=l.useId(),[i,s]=fe(),a=G(e,c=>{if(!s.height)return 0;const o=c%10,m=(10+n-o)%10;let h=m*s.height;return m>5&&(h-=10*s.height),h});return s.height?t.jsx(se.span,{style:{y:a},layoutId:`${r}-${n}`,className:"absolute inset-0  flex items-center justify-center",transition:K,ref:i,children:n}):t.jsx("span",{ref:i,className:"invisible absolute",children:n})}function ye({value:e,padStart:n=!1,decimalSeparator:r="."}){const i=Math.abs(e),[s,a]=i.toString().split("."),c=parseInt(s,10),m=(n&&c<10?`0${s}`:s).split(""),h=m.map((x,d)=>Math.pow(10,m.length-d-1));return t.jsxs("div",{className:"flex items-center ",children:[e<0&&"-",m.map((x,d)=>t.jsx($,{value:c,place:h[d]},`pos-${h[d]}`)),a&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:r}),a.split("").map((x,d)=>t.jsx($,{value:parseInt(a,10),place:Math.pow(10,a.length-d-1)},`decimal-${d}`))]})]})}const je=({targetDate:e})=>{const n=()=>{const a=+new Date(e)-+new Date;let c={};return a>0&&(c={days:Math.floor(a/864e5),hours:Math.floor(a/36e5%24),minutes:Math.floor(a/1e3/60%60),seconds:Math.floor(a/1e3%60)}),c},[r,i]=l.useState(n());l.useEffect(()=>{const a=setTimeout(()=>{i(n())},1e3);return()=>clearTimeout(a)});const s=[];return Object.keys(r).forEach(a=>{r[a]&&s.push(t.jsxs(t.Fragment,{children:[t.jsx(ye,{value:r[a],padStart:!0},a),a!="seconds"&&t.jsx("span",{className:"text-zinc-500",children:":"})]}))}),t.jsx("div",{children:s.length?t.jsx("div",{className:"flex text-[3.5em]  relative  justify-center items-center gap-0.5 font-mono",children:s}):t.jsx("span",{children:"Time's up!"})})};function Ee({election:e,candidates:n,votes:r,largest:i}){console.log(r);const[s,a]=z.useState(!1),[c,o]=z.useState(!1),[m,h]=l.useState(!1),[x,d]=l.useState(0),[y,g]=l.useState(0),[w,N]=l.useState(0),[M,u]=l.useState(0);return l.useEffect(()=>{const b=new Date(e.end_date),p=setInterval(()=>{const S=new Date(e.start_date),j=b.getTime()-S.getTime(),V=Math.floor(j/(1e3*60*60*24));d(V);const E=Math.floor(j%(1e3*60*60*24)/(1e3*60*60));g(E);const C=Math.floor(j%(1e3*60*60)/(1e3*60));N(C);const F=Math.floor(j%(1e3*60)/1e3);u(F),V<=0&&E<=0&&C<=0&&F<=0&&h(!0)},1e3);return()=>clearInterval(p)},[x,y,w,M]),t.jsxs(t.Fragment,{children:[t.jsxs(Q,{title:`Vote - ${e.title}`,children:[t.jsx("link",{rel:"preconnect",href:"https://fonts.bunny.net"}),t.jsx("link",{href:"https://fonts.bunny.net/css?family=instrument-sans:400,500,600",rel:"stylesheet"})]}),t.jsxs("section",{className:"relative content-center flex-col flex min-h-dvh w-full overflow-hidden rounded-md bg-black/[0.96] antialiased md:items-center md:justify-center",children:[t.jsx("div",{className:I("pointer-events-none absolute inset-0 opacity-50 [background-size:40px_40px] select-none","[background-image:linear-gradient(to_right,#171717_1px,transparent_1px),linear-gradient(to_bottom,#171717_1px,transparent_1px)]")}),t.jsx(oe,{className:"-top-20 left-0 md:-top-72 md:left-60",fill:"white"}),t.jsxs("section",{className:"relative min-h-dvh container content-center z-10 mx-auto w-full max-w-7xl p-4 pt-20 md:pt-0",children:[t.jsx(f,{duration:1,direction:"up",delay:1,inView:!0,children:t.jsx("h1",{className:"bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-7xl",children:e.title})}),t.jsx(f,{duration:1,direction:"up",delay:1.5,inView:!0,children:t.jsx("p",{className:"mx-auto mt-4 max-w-lg text-center text-sm md:text-base font-normal text-neutral-300",children:e.description||"Welcome to the voting platform! Here you can find all the candidates for the election. please give your best vote."})}),!s&&t.jsx(f,{duration:1,delay:3,direction:"up",inView:!0,className:" flex hover:bg-muted-foreground/25 justify-center border-2 border-accent-foreground/30  pt-1.5  rounded-full  transform -translate-x-1/2 left-1/2  absolute  bottom-7",children:t.jsx("a",{href:"#candidate",children:t.jsx(le,{className:"animate-bounce text-2xl  text-accent-foreground/90 mx-auto mt-4"})})})]}),t.jsx("section",{id:"candidate",className:"min-h-dvh mt-30 py-30   h-full",children:t.jsxs("main",{className:"container gap-15 md:gap-17 max-w-[70em] mx-auto relative  flex flex-col items-center justify-center ",children:[t.jsxs("header",{className:"flex space-y-3  flex-col items-center justify-center px-4 py-2",children:[t.jsx(f,{duration:1,direction:"up",delay:.5,inView:!0,children:t.jsx("h1",{className:" bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-5xl ",children:"The Candidate"})}),t.jsx(f,{duration:1,onAnimationComplete:()=>a(!0),direction:"up",delay:.7,inView:!0,children:t.jsx("p",{className:"  px-10 text-center   text-muted-foreground",children:"Pls select the best choise , from the bottom of your heart "})})]}),s&&t.jsx("section",{className:I("w-full  grid grid-cols-1 md:grid-cols-2 lg:gap-6  gap-20 px-4",n.length>2?" lg:grid-cols-3":"lg:grid-cols-2"),children:n.length>0&&n.map((b,p)=>t.jsx(f,{duration:1,direction:"up",delay:p*.8,onAnimationComplete:()=>p===n.length-1&&o(!0),inView:!0,children:t.jsx(H,{election:e,Calon:b})},p))})]})}),e.status==="finished"?t.jsxs(t.Fragment,{children:[t.jsx("section",{id:"result",className:"min-h-dvh mt-30 py-30   h-full",children:t.jsxs("main",{className:"container gap-15 md:gap-17  mx-auto relative  flex flex-col items-center justify-center ",children:[t.jsxs("header",{className:"flex space-y-3  flex-col items-center justify-center px-4 py-2",children:[t.jsx(f,{duration:1,direction:"up",delay:.5,inView:!0,children:t.jsx("h1",{className:" bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-5xl ",children:"The Result"})}),t.jsx(f,{duration:1,direction:"up",delay:.7,inView:!0,children:t.jsx("p",{className:"  px-10 text-center   text-muted-foreground",children:" This is the final result from the elections "})})]}),t.jsxs("div",{className:"*:data-[slot=card]:from-primary/5 *:data-[slot=card]:to-card dark:*:data-[slot=card]:bg-card grid grid-cols-1 md:grid-cols-2 gap-10 px-4 *:data-[slot=card]:bg-gradient-to-t *:data-[slot=card]:shadow-xs lg:px-6 @xl/main:grid-cols-2 ",children:[t.jsx(f,{duration:1,direction:"up",delay:1,inView:!0,children:t.jsx(ie,{calon:n})}),t.jsx(f,{duration:1,direction:"up",delay:2,inView:!0,children:t.jsx(ae,{calon:n})})]})]})}),t.jsx("section",{id:"winner",className:"min-h-dvh mt-30 py-30   h-full",children:t.jsxs("main",{className:"container gap-15 md:gap-17  mx-auto relative  flex flex-col items-center justify-center ",children:[t.jsxs("header",{className:"flex space-y-3  flex-col items-center justify-center px-4 py-2",children:[t.jsx(f,{duration:1,direction:"up",delay:.5,inView:!0,children:t.jsx("h1",{className:"  bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-5xl ",children:"The Winner"})}),t.jsx(f,{duration:1,direction:"up",delay:.7,inView:!0,children:t.jsx("p",{className:"  px-10 text-center   text-muted-foreground",children:" This is the winner from the elections "})})]}),n.length>0&&n.map((b,p)=>{if(b.votes_count>=i)return t.jsx(f,{duration:1,direction:"up",delay:p*.8,onAnimationComplete:()=>p===n.length-1&&o(!0),inView:!0,children:t.jsx(H,{election:e,Calon:b})},p)})]})})]}):t.jsx("section",{id:"countdown",className:"min-h-dvh  content-center  h-full",children:t.jsx(f,{duration:1,direction:"up",delay:.5,inView:!0,children:t.jsx(je,{targetDate:e.end_date})})})]})]})}export{Ee as default};
