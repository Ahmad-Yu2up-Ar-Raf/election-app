import{a as B,B as y,c as F}from"./button-BOrXaaHL.js";import{r as p,j as e,t as w,m as q}from"./app-CXSJomay.js";import{F as ve,a as E,b as T,c as $,d as I,e as U,f as R,u as te,s as re,h as Ne,i as we}from"./form-URyGwK2E.js";import{X as Se,u as ne,o as le,p as Ce,q as ie,r as oe,s as ce,t as de,v as ue,w as me}from"./site-header-j6zwA2q1.js";import{P as Fe,r as De,s as ze,C as Ee,t as Te,v as $e,w as Ie,x as Ue,y as Re,S as W,a as Y,b as J,c as K,d as X,z as Z,L as M,A as xe,E as Me,F as pe,G as he,H as fe,I as je,J as ge,K as be}from"./delete-tasks-dialog-Cl8jktGP.js";import{I as se}from"./label-_Kkhdhia.js";import{T as ae}from"./textarea-DfypchEb.js";import{C as _e}from"./index-xWzCG7Mf.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ke=B("CircleAlert",Le);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Oe=B("Image",Be);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"m21 3-6.75 6.75",key:"pv0uzu"}],["circle",{cx:"10",cy:"14",r:"6",key:"1qwbdc"}]],es=B("Mars",Ae);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],qe=B("Upload",Ve);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M9 19h6",key:"456am0"}],["circle",{cx:"12",cy:"9",r:"6",key:"1nw4tq"}]],ss=B("Venus",Ge),Pe=(s={})=>{const{maxFiles:j=1/0,maxSize:r=1/0,accept:N="*",multiple:h=!1,initialFiles:t=[],onFilesChange:c,onFilesAdded:D}=s,[o,n]=p.useState({files:t.map(a=>({file:a,id:a.id,preview:a.url})),isDragging:!1,errors:[]}),l=p.useRef(null),g=p.useCallback(a=>{if(a instanceof File){if(a.size>r)return`File "${a.name}" exceeds the maximum size of ${V(r)}.`}else if(a.size>r)return`File "${a.name}" exceeds the maximum size of ${V(r)}.`;if(N!=="*"){const u=N.split(",").map(C=>C.trim()),m=a instanceof File?a.type||"":a.type,S=`.${a instanceof File,a.name.split(".").pop()}`;if(!u.some(C=>{if(C.startsWith("."))return S.toLowerCase()===C.toLowerCase();if(C.endsWith("/*")){const Q=C.split("/")[0];return m.startsWith(`${Q}/`)}return m===C}))return`File "${a instanceof File,a.name}" is not an accepted file type.`}return null},[N,r]),i=p.useCallback(a=>a instanceof File?URL.createObjectURL(a):a.url,[]),x=p.useCallback(a=>a instanceof File?`${a.name}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`:a.id,[]),d=p.useCallback(()=>{n(a=>{a.files.forEach(m=>{m.preview&&m.file instanceof File&&m.file.type.startsWith("image/")&&URL.revokeObjectURL(m.preview)}),l.current&&(l.current.value="");const u={...a,files:[],errors:[]};return c==null||c(u.files),u})},[c]),f=p.useCallback(a=>{if(!a||a.length===0)return;const u=Array.from(a),m=[];if(n(b=>({...b,errors:[]})),h||d(),h&&j!==1/0&&o.files.length+u.length>j){m.push(`You can only upload a maximum of ${j} files.`),n(b=>({...b,errors:m}));return}const S=[];u.forEach(b=>{if(h&&o.files.some(ee=>ee.file.name===b.name&&ee.file.size===b.size))return;if(b.size>r){m.push(h?`Some files exceed the maximum size of ${V(r)}.`:`File exceeds the maximum size of ${V(r)}.`);return}const C=g(b);C?m.push(C):S.push({file:b,id:x(b),preview:i(b)})}),S.length>0?(D==null||D(S),n(b=>{const C=h?[...b.files,...S]:S;return c==null||c(C),{...b,files:C,errors:m}})):m.length>0&&n(b=>({...b,errors:m})),l.current&&(l.current.value="")},[o.files.length,j,h,r,g,i,x,d,c,D]),v=p.useCallback(a=>{n(u=>{const m=u.files.find(b=>b.id===a);m&&m.preview&&m.file instanceof File&&m.file.type.startsWith("image/")&&URL.revokeObjectURL(m.preview);const S=u.files.filter(b=>b.id!==a);return c==null||c(S),{...u,files:S,errors:[]}})},[c]),z=p.useCallback(()=>{n(a=>({...a,errors:[]}))},[]),P=p.useCallback(a=>{a.preventDefault(),a.stopPropagation(),n(u=>({...u,isDragging:!0}))},[]),L=p.useCallback(a=>{a.preventDefault(),a.stopPropagation(),!a.currentTarget.contains(a.relatedTarget)&&n(u=>({...u,isDragging:!1}))},[]),O=p.useCallback(a=>{a.preventDefault(),a.stopPropagation()},[]),_=p.useCallback(a=>{var u;if(a.preventDefault(),a.stopPropagation(),n(m=>({...m,isDragging:!1})),!((u=l.current)!=null&&u.disabled)&&a.dataTransfer.files&&a.dataTransfer.files.length>0)if(h)f(a.dataTransfer.files);else{const m=a.dataTransfer.files[0];f([m])}},[f,h]),k=p.useCallback(a=>{a.target.files&&a.target.files.length>0&&f(a.target.files)},[f]),H=p.useCallback(()=>{l.current&&l.current.click()},[]),A=p.useCallback((a={})=>({...a,type:"file",onChange:k,accept:a.accept||N,multiple:a.multiple!==void 0?a.multiple:h,ref:l}),[N,h,k]);return[o,{addFiles:f,removeFile:v,clearFiles:d,clearErrors:z,handleDragEnter:P,handleDragLeave:L,handleDragOver:O,handleDrop:_,handleFileChange:k,openFileDialog:H,getInputProps:A}]},V=(s,j=2)=>{if(s===0)return"0 Bytes";const r=1024,N=j<0?0:j,h=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],t=Math.floor(Math.log(s)/Math.log(r));return Number.parseFloat((s/Math.pow(r,t)).toFixed(N))+h[t]},ye=p.forwardRef(({value:s,onChange:j,disabled:r,defaultValue:N,error:h,...t},c)=>{var a;const[n,l]=p.useState(!1),[{files:g,isDragging:i,errors:x},{handleDragEnter:d,handleDragLeave:f,handleDragOver:v,handleDrop:z,openFileDialog:P,removeFile:L,getInputProps:O}]=Pe({accept:"image/svg+xml,image/png,image/jpeg,image/jpg,image/gif",maxSize:2097152}),_=(()=>{var u;return(u=g[0])!=null&&u.preview?g[0].preview:s instanceof File?URL.createObjectURL(s):typeof s=="string"&&s&&!n?s:N&&!n?N:null})(),k=((a=g[0])==null?void 0:a.file.name)||(s instanceof File?s.name:null)||null;p.useImperativeHandle(c,()=>{var S;const u=(S=O())==null?void 0:S.ref,m=u&&"current"in u?u.current:null;if(!m)throw new Error("Input element not found");return m}),p.useEffect(()=>{g.length>0&&j&&(l(!0),g[0].file instanceof File&&j(g[0].file))},[g,j]);const H=()=>{g[0]&&L(g[0].id),l(!0),j&&j(null)};p.useEffect(()=>{s==null?(l(!1),g.forEach(u=>L(u.id))):typeof s=="string"&&g.length===0&&l(!1)},[s,g,L]);const A=[...x,...h?[h]:[]];return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onDragEnter:r?void 0:d,onDragLeave:r?void 0:f,onDragOver:r?void 0:v,onDrop:r?void 0:z,"data-dragging":!r&&(i||void 0),"data-disabled":r||void 0,className:"border-input data-[dragging=true]:bg-accent/50 data-[disabled=true]:opacity-50 data-[disabled=true]:cursor-not-allowed has-[input:focus]:border-ring has-[input:focus]:ring-ring/50 relative flex min-h-52 flex-col items-center justify-center overflow-hidden rounded-xl border border-dashed p-4 transition-colors has-[input:focus]:ring-[3px]",children:[e.jsx("input",{...O(),className:"sr-only","aria-label":"Upload image file",disabled:r,...t}),_?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:e.jsx("img",{src:_,alt:k||"Uploaded image",className:"mx-auto max-h-full rounded object-contain",onError:u=>{console.error("Image failed to load:",_)}})}):e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-3 text-center",children:[e.jsx("div",{className:"bg-background mb-2 flex size-11 shrink-0 items-center justify-center rounded-full border","aria-hidden":"true",children:e.jsx(Oe,{className:"size-4 opacity-60"})}),e.jsx("p",{className:"mb-1.5 text-sm font-medium",children:"Drop your image here"}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["SVG, PNG, JPG or GIF (max. ",2,"MB)"]}),e.jsxs(y,{type:"button",variant:"outline",className:"mt-4",disabled:r,onClick:P,children:[e.jsx(qe,{className:"-ms-1 size-4 opacity-60","aria-hidden":"true"}),"Select image"]})]})]}),_&&!r&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("button",{type:"button",className:"focus-visible:border-ring focus-visible:ring-ring/50 z-50 flex size-8 cursor-pointer items-center justify-center rounded-full bg-black/60 text-white transition-[color,box-shadow] outline-none hover:bg-black/80 focus-visible:ring-[3px]",onClick:H,"aria-label":"Remove image",children:e.jsx(Se,{className:"size-4","aria-hidden":"true"})})})]}),A.length>0&&e.jsxs("div",{className:"text-destructive flex items-center gap-1 text-xs",role:"alert",children:[e.jsx(ke,{className:"size-3 shrink-0"}),e.jsx("span",{children:A[0]})]}),!1]})});ye.displayName="PictureImageInput";function G({form:s,onSubmit:j,elections:r,children:N,currentEmployee:h,isPending:t}){const c=["active","inactive","pending","disqualified","rejected","approved","suspended","qualified"],D=["male","female"];return e.jsx(ve,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(j),className:"flex overflow-y-scroll pt-6 md:pt-0 md:overflow-y-visible flex-col gap-4 px-0",children:[e.jsxs("main",{className:"space-y-6 mb-6",children:[e.jsxs("section",{className:"space-y-10 border-b pb-8 pt-2 px-4 sm:px-6",children:[e.jsx(E,{control:s.control,name:"nama",render:({field:o})=>e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Name"}),e.jsx(I,{children:e.jsx(se,{placeholder:"Employee name",type:"text",disabled:t,...o})}),e.jsx(U,{children:"Your osis calon full name."}),e.jsx(R,{})]})}),e.jsx(E,{control:s.control,name:"kelas",render:({field:o})=>e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Kelas"}),e.jsx(I,{children:e.jsx(se,{placeholder:"Student class",type:"text",disabled:t,...o})}),e.jsx(U,{children:"Your osis calon class."}),e.jsx(R,{})]})}),r&&r.length>0?e.jsx(E,{disabled:t,control:s.control,defaultValue:h==null?void 0:h.election_id,name:"election_id",render:({field:o})=>{var n;return e.jsxs(T,{className:"flex flex-col",children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Election"}),e.jsxs(Fe,{children:[e.jsx(De,{asChild:!0,children:e.jsx(I,{children:e.jsx(y,{variant:"outline",role:"combobox",disabled:t,className:F("w-full justify-between",!o.value&&"text-muted-foreground"),children:o.value?((n=r.find(l=>l.id===o.value))==null?void 0:n.title)||"Election not found":"Select elections"})})}),e.jsx(ze,{className:"w-full p-0",children:e.jsxs(Ee,{children:[e.jsx(Te,{placeholder:"Search elections..."}),e.jsxs($e,{children:[e.jsx(Ie,{children:"No elections found."}),e.jsx(Ue,{children:r.map(l=>e.jsxs(Re,{value:l.title||`elections ${l.id}`,onSelect:()=>{s.setValue("election_id",l.id)},children:[e.jsx(_e,{className:F("mr-2 h-4 w-4",l.id===o.value?"opacity-100":"opacity-0")}),l.title||`elections ${l.id}`]},l.id))})]})]})})]}),e.jsx(U,{children:r.length>0&&"Select an available elections for the candidate."}),e.jsx(R,{})]})}}):e.jsx(E,{control:s.control,name:"election_id",render:({field:o})=>e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Elections"}),e.jsxs(W,{onValueChange:()=>{w.error("No elections available, please create an election first."),q.visit("/dashboard/elections")},value:o.value||"",disabled:t,children:[e.jsx(I,{children:e.jsx(Y,{className:"capitalize w-full",children:e.jsx(J,{placeholder:"Empty Running Elections"})})}),e.jsx(K,{children:e.jsxs(X,{value:"no-elections",className:"capitalize relative w-full flex justify-between",children:[e.jsx("span",{children:"Add New Elections"}),"  ",e.jsx(Z,{className:" right-2 absolute"})]},"no-elections")})]}),e.jsx(U,{children:"Select The elections"}),e.jsx(R,{})]})}),e.jsx(E,{disabled:t,control:s.control,name:"picture",render:({field:o,fieldState:n})=>{var l;return e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Picture"}),e.jsx(I,{children:e.jsx(ye,{disabled:t,value:o.value,onChange:g=>{o.onChange(g)},defaultValue:(h==null?void 0:h.picture)||null,error:(l=n.error)==null?void 0:l.message})}),e.jsx(U,{children:"Upload gambar calon (SVG, PNG, JPG, GIF - max 2MB)"}),e.jsx(R,{})]})}}),e.jsx(E,{control:s.control,name:"visi",render:({field:o})=>e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Visi"}),e.jsx(I,{children:e.jsx(ae,{placeholder:"Visi description",className:"resize-none",disabled:t,...o})}),e.jsx(U,{className:"sr-only",children:"Calon's vision"}),e.jsx(R,{})]})}),e.jsx(E,{control:s.control,name:"misi",render:({field:o})=>e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Misi"}),e.jsx(I,{children:e.jsx(ae,{placeholder:"Misi description",className:"resize-none",disabled:t,...o})}),e.jsx(U,{className:"sr-only",children:"Calon's mission"}),e.jsx(R,{})]})}),e.jsx(E,{control:s.control,name:"gender",render:({field:o})=>e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Gender"}),e.jsxs(W,{onValueChange:o.onChange,value:o.value||"",disabled:t,children:[e.jsx(I,{children:e.jsx(Y,{className:"capitalize w-full",children:e.jsx(J,{placeholder:"Select Gender"})})}),e.jsx(K,{children:D.map(n=>e.jsx(X,{value:n,className:"capitalize",children:n},n))})]}),e.jsx(U,{className:"sr-only",children:"Student gender"}),e.jsx(R,{})]})})]}),e.jsxs("section",{className:"space-y-10 px-4 sm:px-6",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Optional Fields"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"These are columns that do not need any value"})]}),e.jsx("section",{className:"space-y-10",children:e.jsx(E,{control:s.control,name:"status",render:({field:o})=>e.jsxs(T,{children:[e.jsx($,{className:F(t&&"text-muted-foreground"),children:"Status"}),e.jsxs(W,{onValueChange:o.onChange,value:o.value||"",disabled:t,children:[e.jsx(I,{children:e.jsx(Y,{className:"capitalize w-full",children:e.jsx(J,{placeholder:"Select Status"})})}),e.jsx(K,{children:c.map(n=>e.jsx(X,{value:n,className:"capitalize",children:n},n))})]}),e.jsx(U,{className:"sr-only",children:"Student status"}),e.jsx(R,{})]})})})]})]}),N]})})}function as({elections:s}){const[j,r]=p.useState(!1),[N,h]=p.useTransition(),[t,c]=p.useState(!1),D=ne(),n=window.location.pathname.split("/").filter(i=>i)[1],l=te({mode:"onSubmit",defaultValues:{nama:"",kelas:"",status:"active"},resolver:re(Ne)});function g(i){h(async()=>{c(!0);const x=new FormData;x.append("nama",i.nama),x.append("kelas",i.kelas),x.append("gender",i.gender),x.append("status",i.status),x.append("election_id",i.election_id?i.election_id.toString():""),i.visi&&x.append("visi",i.visi),i.misi&&x.append("misi",i.misi),i.picture&&(i.picture instanceof File?x.append("picture",i.picture):x.append("existing_picture",i.picture)),q.post(route(`dashboard.${n}.store`),x,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onSuccess:()=>{l.reset(),r(!1),w.success("Calon created"),c(!1)},onError:d=>{console.error("Submit error:",d),w.error(`Error: ${Object.values(d).join(", ")}`),c(!1),l.reset()}})})}return D?e.jsxs(xe,{open:j,onOpenChange:r,modal:!0,children:[e.jsx(Me,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:" bg-background",size:"sm",children:[e.jsx(Z,{className:""}),e.jsx("span",{className:" sr-only",children:"Add New "})]})}),e.jsxs(pe,{className:"flex flex-col  ",children:[e.jsxs(he,{className:"text-left sm:px-6 space-y-1 bg-background    p-4 border-b  ",children:[e.jsxs(fe,{className:" text-xl",children:["Add New ",e.jsx(y,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base",children:"Candidate"})," "]}),e.jsx(je,{className:" text-sm",children:"Fill in the details below to create a new task"})]}),e.jsx(G,{elections:s,isPending:t,form:l,onSubmit:g,children:e.jsxs(ge,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx(be,{disabled:t,asChild:!0,onClick:()=>l.reset(),children:e.jsxs(y,{disabled:t,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(y,{type:"submit",disabled:t,className:"w-fit  !pointer-events-auto  dark:bg-primary  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Add"]})]})})]})]}):e.jsxs(le,{open:j,onOpenChange:r,modal:!0,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:" text-sm  bg-background",size:"sm",children:[e.jsx(Z,{className:" mr-3 "}),"Add New"]})}),e.jsxs(ie,{className:"flex flex-col gap-6 overflow-y-scroll ",children:[e.jsxs(oe,{className:"text-left sm:px-6 space-y-1 bg-background z-30  sticky top-0   p-4 border-b  ",children:[e.jsxs(ce,{className:" text-lg",children:["Add New ",e.jsx(y,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base capitalize",children:"Candidate"})," "]}),e.jsx(de,{className:" sr-only",children:"Fill in the details below to create a new task"})]}),e.jsx(G,{elections:s,isPending:t,form:l,onSubmit:g,children:e.jsxs(ue,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx(me,{disabled:t,asChild:!0,onClick:()=>l.reset(),children:e.jsxs(y,{disabled:t,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(y,{disabled:t,type:"submit",className:"w-fit dark:bg-primary !pointer-events-auto  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Add"]})]})})]})]})}function ts({task:s,elections:j,...r}){const[N,h]=p.useTransition(),[t,c]=p.useState(!1),o=window.location.pathname.split("/").filter(i=>i)[1],n=te({resolver:re(we),defaultValues:{nama:(s==null?void 0:s.nama)||"",picture:(s==null?void 0:s.picture)||"",kelas:(s==null?void 0:s.kelas)||"",visi:(s==null?void 0:s.visi)||"",misi:(s==null?void 0:s.misi)||"",status:(s==null?void 0:s.status)||"active",gender:(s==null?void 0:s.gender)||"male"}});p.useEffect(()=>{s&&n.reset({nama:s.nama||"",picture:s.picture||"",kelas:s.kelas||"",visi:s.visi||"",misi:s.misi||"",status:s.status||"active",gender:s.gender||"male"})},[s,n]);function l(i){if(!(s!=null&&s.id)){w.error("Student ID is missing");return}console.log("Form input data:",i),c(!0),h(()=>{const x=new FormData;x.append("nama",i.nama),x.append("kelas",i.kelas),x.append("gender",i.gender),x.append("status",i.status),x.append("visi",i.visi),x.append("misi",i.misi),x.append("election_id",i.election_id?i.election_id.toString():""),x.append("_method","PUT"),i.picture instanceof File&&(x.append("picture",i.picture),console.log("Adding new picture file to FormData")),console.log("Sending request with FormData"),o==="admind"?q.post(route("dashboard.admind.update",{admind:s.id}),x,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onBefore:d=>{console.log("Request about to start:",d)},onStart:d=>{console.log("Request started"),w.loading("Updating student data...",{id:"update-toast"})},onSuccess:d=>{var f;console.log("Success response:",d),c(!1),(f=r.onOpenChange)==null||f.call(r,!1),w.success("Student updated successfully",{id:"update-toast"}),n.reset()},onError:d=>{c(!1),console.error("Form submission error:",d),typeof d=="object"&&d!==null?Object.entries(d).forEach(([f,v])=>{Array.isArray(v)?v.forEach(z=>{w.error(`${f}: ${z}`,{id:"update-toast"}),n.setError(f,{type:"manual",message:z})}):typeof v=="string"&&(w.error(`${f}: ${v}`,{id:"update-toast"}),n.setError(f,{type:"manual",message:v}))}):w.error("Failed to update student data",{id:"update-toast"})},onFinish:()=>{c(!1),console.log("Request finished")}}):q.post(route("dashboard.candidate.update",{candidate:s.id}),x,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onBefore:d=>{console.log("Request about to start:",d)},onStart:d=>{console.log("Request started"),w.loading("Updating student data...",{id:"update-toast"})},onSuccess:d=>{var f;console.log("Success response:",d),c(!1),(f=r.onOpenChange)==null||f.call(r,!1),w.success("Student updated successfully",{id:"update-toast"}),n.reset()},onError:d=>{c(!1),console.error("Form submission error:",d),typeof d=="object"&&d!==null?Object.entries(d).forEach(([f,v])=>{Array.isArray(v)?v.forEach(z=>{w.error(`${f}: ${z}`,{id:"update-toast"}),n.setError(f,{type:"manual",message:z})}):typeof v=="string"&&(w.error(`${f}: ${v}`,{id:"update-toast"}),n.setError(f,{type:"manual",message:v}))}):w.error("Failed to update student data",{id:"update-toast"})},onFinish:()=>{c(!1),console.log("Request finished")}})})}return ne()?e.jsx(xe,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(pe,{className:"flex flex-col",children:[e.jsxs(he,{className:"text-left sm:px-6 space-y-1 bg-background z-40 p-4 border-b",children:[e.jsxs(fe,{className:"text-xl",children:["Update",e.jsx(y,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.nama})]}),e.jsx(je,{className:"text-sm",children:"Fill in the details below to update the task"})]}),e.jsx(G,{form:n,elections:j,onSubmit:l,isPending:t,currentEmployee:s,children:e.jsxs(ge,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx(be,{disabled:t,asChild:!0,onClick:()=>n.reset(),children:e.jsxs(y,{disabled:t,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(y,{disabled:t,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Update"]})]})})]})}):e.jsx(le,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(ie,{className:"flex flex-col gap-6 overflow-y-scroll",children:[e.jsxs(oe,{className:"text-left sm:px-6 space-y-1 bg-background z-40 sticky top-0 p-4 border-b",children:[e.jsxs(ce,{className:"text-lg",children:["Update",e.jsx(y,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.nama})]}),e.jsx(de,{className:"sr-only",children:"Fill in the details below to update the task"})]}),e.jsx(G,{form:n,onSubmit:l,isPending:t,currentEmployee:s,elections:j,children:e.jsxs(ue,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx(me,{disabled:t,asChild:!0,onClick:()=>n.reset(),children:e.jsxs(y,{disabled:t,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(y,{disabled:t,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Update"]})]})})]})})}export{as as C,es as M,ts as U,ss as V};
