import{r as f,j as e,t as y,m as U,R as H}from"./app-9UtIOb6G.js";import{F as De,a as k,b as E,c as I,d as T,e as $,f as R,u as oe,s as ce,g as Fe,h as ze}from"./form-7F2ktFPE.js";import{a as B,B as N,c as F}from"./button-ChhXiX7I.js";import{d as de,e as ke,f as ue,g as me,h as xe,i as pe,j as he,k as fe,D as Ee,l as Ie,m as Te,n as ae,o as $e,u as Re,p as Me,q as Ae,r as Ue}from"./site-header-BJT1z7VU.js";import{X as Oe,u as ge}from"./index-CIDt2uqx.js";import{L as M,D as je,a as _e,b as be,c as ve,d as ye,e as Ne,f as we,g as Se}from"./drawer-CK6ywJF8.js";import{P as Be,e as Le,f as Pe,C as Ve,g as qe,h as Ge,i as Ke,j as He,k as We,S as W,a as Y,b as J,c as X,d as Z,l as Q,E as Ye,m as Je,B as te}from"./delete-tasks-dialog-VfMRkk1s.js";import{C as re}from"./checkbox-CDksHgKQ.js";import{T as ne,D as le,I as Xe,a as Ze}from"./data-table-column-header-Hti4l3_c.js";import{I as ie}from"./label-DiQJDo_v.js";import{C as Qe}from"./index-D0hyZyvG.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ss=B("CircleAlert",es);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ts=B("Image",as);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"m21 3-6.75 6.75",key:"pv0uzu"}],["circle",{cx:"10",cy:"14",r:"6",key:"1qwbdc"}]],ns=B("Mars",rs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],is=B("Upload",ls);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M9 19h6",key:"456am0"}],["circle",{cx:"12",cy:"9",r:"6",key:"1nw4tq"}]],cs=B("Venus",os),ds=(s={})=>{const{maxFiles:c=1/0,maxSize:r=1/0,accept:v="*",multiple:m=!1,initialFiles:t=[],onFilesChange:u,onFilesAdded:D}=s,[o,n]=f.useState({files:t.map(a=>({file:a,id:a.id,preview:a.url})),isDragging:!1,errors:[]}),i=f.useRef(null),j=f.useCallback(a=>{if(a instanceof File){if(a.size>r)return`File "${a.name}" exceeds the maximum size of ${V(r)}.`}else if(a.size>r)return`File "${a.name}" exceeds the maximum size of ${V(r)}.`;if(v!=="*"){const p=v.split(",").map(C=>C.trim()),h=a instanceof File?a.type||"":a.type,S=`.${a instanceof File,a.name.split(".").pop()}`;if(!p.some(C=>{if(C.startsWith("."))return S.toLowerCase()===C.toLowerCase();if(C.endsWith("/*")){const ee=C.split("/")[0];return h.startsWith(`${ee}/`)}return h===C}))return`File "${a instanceof File,a.name}" is not an accepted file type.`}return null},[v,r]),l=f.useCallback(a=>a instanceof File?URL.createObjectURL(a):a.url,[]),d=f.useCallback(a=>a instanceof File?`${a.name}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`:a.id,[]),x=f.useCallback(()=>{n(a=>{a.files.forEach(h=>{h.preview&&h.file instanceof File&&h.file.type.startsWith("image/")&&URL.revokeObjectURL(h.preview)}),i.current&&(i.current.value="");const p={...a,files:[],errors:[]};return u==null||u(p.files),p})},[u]),g=f.useCallback(a=>{if(!a||a.length===0)return;const p=Array.from(a),h=[];if(n(b=>({...b,errors:[]})),m||x(),m&&c!==1/0&&o.files.length+p.length>c){h.push(`You can only upload a maximum of ${c} files.`),n(b=>({...b,errors:h}));return}const S=[];p.forEach(b=>{if(m&&o.files.some(se=>se.file.name===b.name&&se.file.size===b.size))return;if(b.size>r){h.push(m?`Some files exceed the maximum size of ${V(r)}.`:`File exceeds the maximum size of ${V(r)}.`);return}const C=j(b);C?h.push(C):S.push({file:b,id:d(b),preview:l(b)})}),S.length>0?(D==null||D(S),n(b=>{const C=m?[...b.files,...S]:S;return u==null||u(C),{...b,files:C,errors:h}})):h.length>0&&n(b=>({...b,errors:h})),i.current&&(i.current.value="")},[o.files.length,c,m,r,j,l,d,x,u,D]),w=f.useCallback(a=>{n(p=>{const h=p.files.find(b=>b.id===a);h&&h.preview&&h.file instanceof File&&h.file.type.startsWith("image/")&&URL.revokeObjectURL(h.preview);const S=p.files.filter(b=>b.id!==a);return u==null||u(S),{...p,files:S,errors:[]}})},[u]),z=f.useCallback(()=>{n(a=>({...a,errors:[]}))},[]),G=f.useCallback(a=>{a.preventDefault(),a.stopPropagation(),n(p=>({...p,isDragging:!0}))},[]),O=f.useCallback(a=>{a.preventDefault(),a.stopPropagation(),!a.currentTarget.contains(a.relatedTarget)&&n(p=>({...p,isDragging:!1}))},[]),L=f.useCallback(a=>{a.preventDefault(),a.stopPropagation()},[]),A=f.useCallback(a=>{var p;if(a.preventDefault(),a.stopPropagation(),n(h=>({...h,isDragging:!1})),!((p=i.current)!=null&&p.disabled)&&a.dataTransfer.files&&a.dataTransfer.files.length>0)if(m)g(a.dataTransfer.files);else{const h=a.dataTransfer.files[0];g([h])}},[g,m]),_=f.useCallback(a=>{a.target.files&&a.target.files.length>0&&g(a.target.files)},[g]),K=f.useCallback(()=>{i.current&&i.current.click()},[]),P=f.useCallback((a={})=>({...a,type:"file",onChange:_,accept:a.accept||v,multiple:a.multiple!==void 0?a.multiple:m,ref:i}),[v,m,_]);return[o,{addFiles:g,removeFile:w,clearFiles:x,clearErrors:z,handleDragEnter:G,handleDragLeave:O,handleDragOver:L,handleDrop:A,handleFileChange:_,openFileDialog:K,getInputProps:P}]},V=(s,c=2)=>{if(s===0)return"0 Bytes";const r=1024,v=c<0?0:c,m=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],t=Math.floor(Math.log(s)/Math.log(r));return Number.parseFloat((s/Math.pow(r,t)).toFixed(v))+m[t]},Ce=f.forwardRef(({value:s,onChange:c,disabled:r,defaultValue:v,error:m,...t},u)=>{var a;const[n,i]=f.useState(!1),[{files:j,isDragging:l,errors:d},{handleDragEnter:x,handleDragLeave:g,handleDragOver:w,handleDrop:z,openFileDialog:G,removeFile:O,getInputProps:L}]=ds({accept:"image/svg+xml,image/png,image/jpeg,image/jpg,image/gif",maxSize:2097152}),A=(()=>{var p;return(p=j[0])!=null&&p.preview?j[0].preview:s instanceof File?URL.createObjectURL(s):typeof s=="string"&&s&&!n?s:v&&!n?v:null})(),_=((a=j[0])==null?void 0:a.file.name)||(s instanceof File?s.name:null)||null;f.useImperativeHandle(u,()=>{var S;const p=(S=L())==null?void 0:S.ref,h=p&&"current"in p?p.current:null;if(!h)throw new Error("Input element not found");return h}),f.useEffect(()=>{j.length>0&&c&&(i(!0),j[0].file instanceof File&&c(j[0].file))},[j,c]);const K=()=>{j[0]&&O(j[0].id),i(!0),c&&c(null)};f.useEffect(()=>{s==null?(i(!1),j.forEach(p=>O(p.id))):typeof s=="string"&&j.length===0&&i(!1)},[s,j,O]);const P=[...d,...m?[m]:[]];return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onDragEnter:r?void 0:x,onDragLeave:r?void 0:g,onDragOver:r?void 0:w,onDrop:r?void 0:z,"data-dragging":!r&&(l||void 0),"data-disabled":r||void 0,className:"border-input data-[dragging=true]:bg-accent/50 data-[disabled=true]:opacity-50 data-[disabled=true]:cursor-not-allowed has-[input:focus]:border-ring has-[input:focus]:ring-ring/50 relative flex min-h-52 flex-col items-center justify-center overflow-hidden rounded-xl border border-dashed p-4 transition-colors has-[input:focus]:ring-[3px]",children:[e.jsx("input",{...L(),className:"sr-only","aria-label":"Upload image file",disabled:r,...t}),A?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:e.jsx("img",{src:A,alt:_||"Uploaded image",className:"mx-auto max-h-full rounded object-contain",onError:p=>{console.error("Image failed to load:",A)}})}):e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-3 text-center",children:[e.jsx("div",{className:"bg-background mb-2 flex size-11 shrink-0 items-center justify-center rounded-full border","aria-hidden":"true",children:e.jsx(ts,{className:"size-4 opacity-60"})}),e.jsx("p",{className:"mb-1.5 text-sm font-medium",children:"Drop your image here"}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["SVG, PNG, JPG or GIF (max. ",2,"MB)"]}),e.jsxs(N,{type:"button",variant:"outline",className:"mt-4",disabled:r,onClick:G,children:[e.jsx(is,{className:"-ms-1 size-4 opacity-60","aria-hidden":"true"}),"Select image"]})]})]}),A&&!r&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("button",{type:"button",className:"focus-visible:border-ring focus-visible:ring-ring/50 z-50 flex size-8 cursor-pointer items-center justify-center rounded-full bg-black/60 text-white transition-[color,box-shadow] outline-none hover:bg-black/80 focus-visible:ring-[3px]",onClick:K,"aria-label":"Remove image",children:e.jsx(Oe,{className:"size-4","aria-hidden":"true"})})})]}),P.length>0&&e.jsxs("div",{className:"text-destructive flex items-center gap-1 text-xs",role:"alert",children:[e.jsx(ss,{className:"size-3 shrink-0"}),e.jsx("span",{children:P[0]})]}),!1]})});Ce.displayName="PictureImageInput";function q({form:s,onSubmit:c,elections:r,children:v,currentEmployee:m,isPending:t}){const u=["active","inactive","pending","disqualified","rejected","approved","suspended","qualified"],D=["male","female"];return e.jsx(De,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(c),className:"flex overflow-y-scroll pt-6 md:pt-0 md:overflow-y-visible flex-col gap-4 px-0",children:[e.jsxs("main",{className:"space-y-6 mb-6",children:[e.jsxs("section",{className:"space-y-10 border-b pb-8 pt-2 px-4 sm:px-6",children:[e.jsx(k,{control:s.control,name:"nama",render:({field:o})=>e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Name"}),e.jsx(T,{children:e.jsx(ie,{placeholder:"Employee name",type:"text",disabled:t,...o})}),e.jsx($,{children:"Your osis calon full name."}),e.jsx(R,{})]})}),e.jsx(k,{control:s.control,name:"kelas",render:({field:o})=>e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Kelas"}),e.jsx(T,{children:e.jsx(ie,{placeholder:"Student class",type:"text",disabled:t,...o})}),e.jsx($,{children:"Your osis calon class."}),e.jsx(R,{})]})}),r&&r.length>0?e.jsx(k,{disabled:t,control:s.control,defaultValue:m==null?void 0:m.election_id,name:"election_id",render:({field:o})=>{var n;return e.jsxs(E,{className:"flex flex-col",children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Election"}),e.jsxs(Be,{children:[e.jsx(Le,{asChild:!0,children:e.jsx(T,{children:e.jsx(N,{variant:"outline",role:"combobox",disabled:t,className:F("w-full justify-between",!o.value&&"text-muted-foreground"),children:o.value?((n=r.find(i=>i.id===o.value))==null?void 0:n.title)||"Election not found":"Select elections"})})}),e.jsx(Pe,{className:"w-full p-0",children:e.jsxs(Ve,{children:[e.jsx(qe,{placeholder:"Search elections..."}),e.jsxs(Ge,{children:[e.jsx(Ke,{children:"No elections found."}),e.jsx(He,{children:r.map(i=>e.jsxs(We,{value:i.title||`elections ${i.id}`,className:" cursor-pointer",onSelect:()=>{s.setValue("election_id",i.id)},children:[e.jsx(Qe,{className:F("mr-2 h-4 w-4",i.id===o.value?"opacity-100":"opacity-0")}),i.title||`elections ${i.id}`]},i.id))})]})]})})]}),e.jsx($,{children:r.length>0&&"Select an available elections for the candidate."}),e.jsx(R,{})]})}}):e.jsx(k,{control:s.control,name:"election_id",render:({field:o})=>e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Elections"}),e.jsxs(W,{onValueChange:()=>{y.error("No elections available, please create an election first."),U.visit("/dashboard/elections")},value:o.value||"",disabled:t,children:[e.jsx(T,{children:e.jsx(Y,{className:"capitalize w-full",children:e.jsx(J,{placeholder:"Empty Running Elections"})})}),e.jsx(X,{children:e.jsxs(Z,{value:"no-elections",className:"capitalize relative w-full flex justify-between",children:[e.jsx("span",{children:"Add New Elections"}),"  ",e.jsx(Q,{className:" right-2 absolute"})]},"no-elections")})]}),e.jsx($,{children:"Select The elections"}),e.jsx(R,{})]})}),e.jsx(k,{disabled:t,control:s.control,name:"picture",render:({field:o,fieldState:n})=>{var i;return e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Picture"}),e.jsx(T,{children:e.jsx(Ce,{disabled:t,value:o.value,onChange:j=>{o.onChange(j)},defaultValue:(m==null?void 0:m.picture)||null,error:(i=n.error)==null?void 0:i.message})}),e.jsx($,{children:"Upload gambar calon (SVG, PNG, JPG, GIF - max 2MB)"}),e.jsx(R,{})]})}}),e.jsx(k,{control:s.control,name:"visi",render:({field:o})=>e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Visi"}),e.jsx(T,{children:e.jsx(ne,{placeholder:"Visi description",className:"resize-none",disabled:t,...o})}),e.jsx($,{className:"sr-only",children:"Calon's vision"}),e.jsx(R,{})]})}),e.jsx(k,{control:s.control,name:"misi",render:({field:o})=>e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Misi"}),e.jsx(T,{children:e.jsx(ne,{placeholder:"Misi description",className:"resize-none",disabled:t,...o})}),e.jsx($,{className:"sr-only",children:"Calon's mission"}),e.jsx(R,{})]})}),e.jsx(k,{control:s.control,name:"gender",render:({field:o})=>e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Gender"}),e.jsxs(W,{onValueChange:o.onChange,value:o.value||"",disabled:t,children:[e.jsx(T,{children:e.jsx(Y,{className:"capitalize w-full",children:e.jsx(J,{placeholder:"Select Gender"})})}),e.jsx(X,{children:D.map(n=>e.jsx(Z,{value:n,className:"capitalize",children:n},n))})]}),e.jsx($,{className:"sr-only",children:"Student gender"}),e.jsx(R,{})]})})]}),e.jsxs("section",{className:"space-y-10 px-4 sm:px-6",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Optional Fields"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"These are columns that do not need any value"})]}),e.jsx("section",{className:"space-y-10",children:e.jsx(k,{control:s.control,name:"status",render:({field:o})=>e.jsxs(E,{children:[e.jsx(I,{className:F(t&&"text-muted-foreground"),children:"Status"}),e.jsxs(W,{onValueChange:o.onChange,value:o.value||"",disabled:t,children:[e.jsx(T,{children:e.jsx(Y,{className:"capitalize w-full",children:e.jsx(J,{placeholder:"Select Status"})})}),e.jsx(X,{children:u.map(n=>e.jsx(Z,{value:n,className:"capitalize",children:n},n))})]}),e.jsx($,{className:"sr-only",children:"Student status"}),e.jsx(R,{})]})})})]})]}),v]})})}function Ss({elections:s}){const[c,r]=f.useState(!1),[v,m]=f.useTransition(),[t,u]=f.useState(!1),D=ge(),n=window.location.pathname.split("/").filter(l=>l)[1],i=oe({mode:"onSubmit",defaultValues:{nama:"",kelas:"",status:"active"},resolver:ce(Fe)});function j(l){m(async()=>{u(!0);const d=new FormData;d.append("nama",l.nama),d.append("kelas",l.kelas),d.append("gender",l.gender),d.append("status",l.status),d.append("election_id",l.election_id?l.election_id.toString():""),l.visi&&d.append("visi",l.visi),l.misi&&d.append("misi",l.misi),l.picture&&(l.picture instanceof File?d.append("picture",l.picture):d.append("existing_picture",l.picture)),U.post(route(`dashboard.${n}.store`),d,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onSuccess:()=>{i.reset(),r(!1),y.success("Calon created"),u(!1)},onError:x=>{console.error("Submit error:",x),y.error(`Error: ${Object.values(x).join(", ")}`),u(!1),i.reset()}})})}return D?e.jsxs(je,{open:c,onOpenChange:r,modal:!0,children:[e.jsx(_e,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:" bg-background",size:"sm",children:[e.jsx(Q,{className:""}),e.jsx("span",{className:" sr-only",children:"Add New "})]})}),e.jsxs(be,{className:"flex flex-col  ",children:[e.jsxs(ve,{className:"text-left sm:px-6 space-y-1 bg-background    p-4 border-b  ",children:[e.jsxs(ye,{className:" text-xl",children:["Add New ",e.jsx(N,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base",children:"Candidate"})," "]}),e.jsx(Ne,{className:" text-sm",children:"Fill in the details below to create a new task"})]}),e.jsx(q,{elections:s,isPending:t,form:i,onSubmit:j,children:e.jsxs(we,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx(Se,{disabled:t,asChild:!0,onClick:()=>i.reset(),children:e.jsxs(N,{disabled:t,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(N,{type:"submit",disabled:t,className:"w-fit  !pointer-events-auto  dark:bg-primary  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Add"]})]})})]})]}):e.jsxs(de,{open:c,onOpenChange:r,modal:!0,children:[e.jsx(ke,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:" text-sm  bg-background",size:"sm",children:[e.jsx(Q,{className:" mr-3 "}),"Add New"]})}),e.jsxs(ue,{className:"flex flex-col gap-6 overflow-y-scroll ",children:[e.jsxs(me,{className:"text-left sm:px-6 space-y-1 bg-background z-30  sticky top-0   p-4 border-b  ",children:[e.jsxs(xe,{className:" text-lg",children:["Add New ",e.jsx(N,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base capitalize",children:"Candidate"})," "]}),e.jsx(pe,{className:" sr-only",children:"Fill in the details below to create a new task"})]}),e.jsx(q,{elections:s,isPending:t,form:i,onSubmit:j,children:e.jsxs(he,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx(fe,{disabled:t,asChild:!0,onClick:()=>i.reset(),children:e.jsxs(N,{disabled:t,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(N,{disabled:t,type:"submit",className:"w-fit dark:bg-primary !pointer-events-auto  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Add"]})]})})]})]})}function us({task:s,elections:c,...r}){const[v,m]=f.useTransition(),[t,u]=f.useState(!1),o=window.location.pathname.split("/").filter(l=>l)[1],n=oe({resolver:ce(ze),defaultValues:{nama:(s==null?void 0:s.nama)||"",picture:(s==null?void 0:s.picture)||"",kelas:(s==null?void 0:s.kelas)||"",visi:(s==null?void 0:s.visi)||"",misi:(s==null?void 0:s.misi)||"",status:(s==null?void 0:s.status)||"active",gender:(s==null?void 0:s.gender)||"male"}});f.useEffect(()=>{s&&n.reset({nama:s.nama||"",picture:s.picture||"",kelas:s.kelas||"",visi:s.visi||"",misi:s.misi||"",status:s.status||"active",gender:s.gender||"male"})},[s,n]);function i(l){if(!(s!=null&&s.id)){y.error("Student ID is missing");return}console.log("Form input data:",l),u(!0),m(()=>{const d=new FormData;d.append("nama",l.nama),d.append("kelas",l.kelas),d.append("gender",l.gender),d.append("status",l.status),d.append("visi",l.visi),d.append("misi",l.misi),d.append("election_id",l.election_id?l.election_id.toString():""),d.append("_method","PUT"),l.picture instanceof File&&(d.append("picture",l.picture),console.log("Adding new picture file to FormData")),console.log("Sending request with FormData"),o==="admind"?U.post(route("dashboard.admind.update",{admind:s.id}),d,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onBefore:x=>{console.log("Request about to start:",x)},onStart:x=>{console.log("Request started"),y.loading("Updating student data...",{id:"update-toast"})},onSuccess:x=>{var g;console.log("Success response:",x),u(!1),(g=r.onOpenChange)==null||g.call(r,!1),y.success("Student updated successfully",{id:"update-toast"}),n.reset()},onError:x=>{u(!1),console.error("Form submission error:",x),typeof x=="object"&&x!==null?Object.entries(x).forEach(([g,w])=>{Array.isArray(w)?w.forEach(z=>{y.error(`${g}: ${z}`,{id:"update-toast"}),n.setError(g,{type:"manual",message:z})}):typeof w=="string"&&(y.error(`${g}: ${w}`,{id:"update-toast"}),n.setError(g,{type:"manual",message:w}))}):y.error("Failed to update student data",{id:"update-toast"})},onFinish:()=>{u(!1),console.log("Request finished")}}):U.post(route("dashboard.candidate.update",{candidate:s.id}),d,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onBefore:x=>{console.log("Request about to start:",x)},onStart:x=>{console.log("Request started"),y.loading("Updating student data...",{id:"update-toast"})},onSuccess:x=>{var g;console.log("Success response:",x),u(!1),(g=r.onOpenChange)==null||g.call(r,!1),y.success("Student updated successfully",{id:"update-toast"}),n.reset()},onError:x=>{u(!1),console.error("Form submission error:",x),typeof x=="object"&&x!==null?Object.entries(x).forEach(([g,w])=>{Array.isArray(w)?w.forEach(z=>{y.error(`${g}: ${z}`,{id:"update-toast"}),n.setError(g,{type:"manual",message:z})}):typeof w=="string"&&(y.error(`${g}: ${w}`,{id:"update-toast"}),n.setError(g,{type:"manual",message:w}))}):y.error("Failed to update student data",{id:"update-toast"})},onFinish:()=>{u(!1),console.log("Request finished")}})})}return ge()?e.jsx(je,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(be,{className:"flex flex-col",children:[e.jsxs(ve,{className:"text-left sm:px-6 space-y-1 bg-background z-40 p-4 border-b",children:[e.jsxs(ye,{className:"text-xl",children:["Update",e.jsx(N,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.nama})]}),e.jsx(Ne,{className:"text-sm",children:"Fill in the details below to update the task"})]}),e.jsx(q,{form:n,elections:c,onSubmit:i,isPending:t,currentEmployee:s,children:e.jsxs(we,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx(Se,{disabled:t,asChild:!0,onClick:()=>n.reset(),children:e.jsxs(N,{disabled:t,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(N,{disabled:t,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Update"]})]})})]})}):e.jsx(de,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(ue,{className:"flex flex-col gap-6 overflow-y-scroll",children:[e.jsxs(me,{className:"text-left sm:px-6 space-y-1 bg-background z-40 sticky top-0 p-4 border-b",children:[e.jsxs(xe,{className:"text-lg",children:["Update",e.jsx(N,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.nama})]}),e.jsx(pe,{className:"sr-only",children:"Fill in the details below to update the task"})]}),e.jsx(q,{form:n,onSubmit:i,isPending:t,currentEmployee:s,elections:c,children:e.jsxs(he,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx(fe,{disabled:t,asChild:!0,onClick:()=>n.reset(),children:e.jsxs(N,{disabled:t,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[t&&e.jsx(M,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(N,{disabled:t,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[t&&e.jsx(M,{className:"animate-spin"}),"Update"]})]})})]})})}function ms({row:s,election:c}){const r=s.original,[v,m]=H.useState(!1),[t,u]=H.useState(!1),[D,o]=H.useState(!1),i=window.location.pathname.split("/").filter(l=>l)[1],j=l=>{try{o(!0),U.delete(route(`dashboard.${i}.destroy`,l),{preserveScroll:!0,preserveState:!0,onBefore:()=>{o(!0)},onSuccess:()=>{y.success("Election deleted successfully"),u(!1),U.reload()},onError:d=>{console.error("Delete error:",d),y.error((d==null?void 0:d.message)||"Failed to delete the election")},onFinish:()=>{o(!1)}})}catch(d){console.error("Delete operation error:",d),y.error("An unexpected error occurred"),o(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ee,{children:[e.jsx(Ie,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"data-[state=open]:bg-muted size-8",children:[e.jsx(Ye,{}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(Te,{align:"end",className:"w-[160px]",children:[e.jsx(ae,{onSelect:()=>m(!0),children:"Edit"}),e.jsxs(ae,{variant:"destructive",onSelect:()=>u(!0),children:["Delete",e.jsx($e,{children:"⌘⌫"})]})]})]}),e.jsx(us,{elections:c,task:r,open:v,onOpenChange:m}),e.jsx(Je,{handledeDelete:j,processing:D,trigger:!1,students:r,open:t,onOpenChange:u})]})}const Cs=[{id:"select",header:({table:s})=>e.jsx("div",{className:"flex items-center  w-14 justify-center",children:e.jsx(re,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:c=>s.toggleAllPageRowsSelected(!!c),"aria-label":"Select all"})}),cell:({row:s})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(re,{checked:s.getIsSelected(),onCheckedChange:c=>s.toggleSelected(!!c),"aria-label":"Select row"})}),enableSorting:!1,enableHiding:!1},{accessorKey:"nama",header:({column:s})=>e.jsx(le,{column:s,title:"nama"}),cell:({row:s})=>{const c=Re();return e.jsxs("div",{className:"flex items-center w-45 gap-4  ",children:[e.jsxs(Me,{className:"  relative flex size-10 shrink-0 overflow-hidden rounded-full",children:[e.jsx(Ae,{src:s.original.picture,alt:s.original.nama}),e.jsx(Ue,{className:"rounded-lg  bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:c(s.original.nama)})]}),s.original.nama]})},enableHiding:!1},{accessorKey:"Election",header:"Election",cell:({row:s})=>{var c;return e.jsx("div",{className:"w-40",children:(c=s.original.elections)==null?void 0:c.title})}},{accessorKey:"voters",header:({column:s})=>e.jsx(le,{column:s,title:"voters"}),cell:({row:s})=>e.jsx("div",{className:"flex w-32 items-center gap-2",children:e.jsx("span",{children:s.original.votes_count})}),filterFn:(s,c,r)=>r.includes(s.getValue(c))},{accessorKey:"Class",header:"Class",cell:({row:s})=>e.jsx("div",{className:"w-32",children:s.original.kelas})},{accessorKey:"gender",header:"gender",cell:({row:s})=>e.jsx("div",{className:"w-32",children:e.jsxs(te,{variant:"outline",className:"text-muted-foreground px-1.5",children:[s.original.gender==="male"?e.jsx(ns,{}):e.jsx(cs,{}),s.original.gender]})})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx("div",{className:" w-32",children:e.jsxs(te,{variant:"outline",className:"text-muted-foreground px-1.5",children:[s.original.status==="active"?e.jsx(Xe,{className:"fill-green-500 dark:fill-green-400"}):e.jsx(Ze,{}),s.original.status]})})},{accessorKey:"Created At",header:"Created At",cell:({row:s})=>e.jsx("div",{className:"w-20",children:s.original.created_at?new Date(s.original.created_at).toLocaleDateString():"N/A"})},{id:"actions",cell:({row:s,table:c})=>{var v;const r=((v=c.options.meta)==null?void 0:v.elections)||[];return e.jsx(e.Fragment,{children:e.jsx(ms,{election:r,row:s})})}}];export{Ss as C,Cs as c};
