import{r as j,j as e,t as x,m as F,R as z}from"./app-hD4eGxiK.js";import{p as R,q as E,r as M,s as H,t as L,v as V,w as B,x as $,e as ee,f as se,g as ae,h as I,i as re,u as le,j as ne,k as te,l as oe,H as ie,y as de,S as ce,A as me,a as xe,b as pe}from"./site-header-qr60j-9B.js";import{a as he,E as ue,D as je,r as fe}from"./data-CPNBkmoX.js";import{F as ge,a as w,b as N,c as y,d as v,e as S,f as C,S as be,g as we,h as Ne,i as ye,j as ve,u as q,s as K,L as u,k as Y,l as G,m as J,n as Q,o as W,p as X,q as Z,r as Se,D as Ce,B as De,P as _,t as Fe,v as Ae}from"./delete-tasks-dialog-BadLh0zk.js";import{C as O}from"./checkbox-CfXYAjWL.js";import{c as D,B as o}from"./button-BdBng7Xy.js";import{I as P}from"./label-B1ULV7HA.js";import{c as k}from"./createLucideIcon-xWuXexB3.js";import"./index-B6gQPD46.js";import"./index-0_V8QFO3.js";import"./app-logo-icon-df4ONgld.js";import"./chevron-down-Cr-hN6FN.js";import"./dialog-BV4yzBvh.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pe=k("Eye",ze);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ue=k("User",Te),T=j.forwardRef(({className:s,...r},p)=>{const[d,a]=j.useState(!1),t=r.value===""||r.value===void 0||r.disabled;return e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:d?"text":"password",className:D("hide-password-toggle pr-10",s),ref:p,autoComplete:"new-password",...r}),e.jsxs(o,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(h=>!h),disabled:t,children:[d&&!t?e.jsx(Pe,{className:"h-4 w-4","aria-hidden":"true"}):e.jsx(he,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:d?"Hide password":"Show password"})]}),e.jsx("style",{children:`
					.hide-password-toggle::-ms-reveal,
					.hide-password-toggle::-ms-clear {
						visibility: hidden;
						pointer-events: none;
						display: none;
					}
				`})]})});T.displayName="PasswordInput";function A({form:s,onSubmit:r,isUpdated:p=!1,children:d,currentEmployee:a,isPending:t}){const h=["admind","user"];return e.jsx(ge,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(r),className:"flex overflow-y-scroll pt-6 md:pt-0 md:overflow-y-visible flex-col gap-4 px-0",children:[e.jsx("main",{className:"space-y-6 mb-6",children:e.jsxs("section",{className:"space-y-10  pb-8 pt-2 px-4 sm:px-6",children:[e.jsx(w,{control:s.control,name:"name",defaultValue:a==null?void 0:a.name,render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{className:D(t&&"text-muted-foreground"),children:"Name"}),e.jsx(v,{children:e.jsx(P,{placeholder:"Admind name",type:"text",disabled:t,...l})}),e.jsx(S,{children:"Your admind full name."}),e.jsx(C,{})]})}),e.jsx(w,{control:s.control,name:"email",defaultValue:a==null?void 0:a.email,render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{className:D(t&&"text-muted-foreground"),children:"Email"}),e.jsx(v,{children:e.jsx(P,{placeholder:"Email admind",type:"email",disabled:t,...l})}),e.jsx(S,{children:"Your admind email."}),e.jsx(C,{})]})}),!p&&e.jsxs(e.Fragment,{children:[e.jsx(w,{control:s.control,name:"password",defaultValue:a==null?void 0:a.email,render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{children:"Password"}),e.jsx(v,{children:e.jsx(T,{placeholder:"Password",...l})}),e.jsx(S,{children:"Enter your password."}),e.jsx(C,{})]})}),e.jsx(w,{control:s.control,name:"password_confirmation",render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{children:"Password"}),e.jsx(v,{children:e.jsx(T,{placeholder:"password confirmation",...l})}),e.jsx(S,{children:"Enter your password again."}),e.jsx(C,{})]})})]}),e.jsx(w,{control:s.control,name:"role",render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{className:D(t&&"text-muted-foreground"),children:"Role"}),e.jsxs(be,{onValueChange:l.onChange,value:l.value||"",disabled:t,children:[e.jsx(v,{children:e.jsx(we,{className:"capitalize w-full",children:e.jsx(Ne,{placeholder:"Select Role"})})}),e.jsx(ye,{children:h.map(i=>e.jsx(ve,{value:i,className:"capitalize",children:i},i))})]}),e.jsx(S,{className:"sr-only",children:"User Role"}),e.jsx(C,{})]})})]})}),d]})})}function Ie({task:s,...r}){const[p,d]=j.useTransition(),[a,t]=j.useState(!1);window.location.pathname.split("/").filter(n=>n)[1];const l=q({resolver:K(Se),defaultValues:{name:(s==null?void 0:s.name)||"",password:(s==null?void 0:s.password)||"",password_confirmation:(s==null?void 0:s.password_confirmation)||"",role:(s==null?void 0:s.role)||"",email:(s==null?void 0:s.email)||""}});j.useEffect(()=>{s&&l.reset({name:(s==null?void 0:s.name)||"",password:(s==null?void 0:s.password)||"",password_confirmation:(s==null?void 0:s.password_confirmation)||"",role:(s==null?void 0:s.role)||"",email:(s==null?void 0:s.email)||""})},[s,l]);function i(n){if(!(s!=null&&s.id)){x.error("Student ID is missing");return}console.log("Form input data:",n),t(!0),d(()=>{const c=new FormData;c.append("name",n.name),c.append("email",n.email),c.append("role",n.role),c.append("password",n.password),c.append("password_confirmation",n.password_confirmation),c.append("_method","PUT"),F.post(route("dashboard.users.update",{user:s.id}),c,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onBefore:m=>{console.log("Request about to start:",m)},onStart:m=>{console.log("Request started"),x.loading("Updating student data...",{id:"update-toast"})},onSuccess:m=>{var f;console.log("Success response:",m),t(!1),(f=r.onOpenChange)==null||f.call(r,!1),x.success("Student updated successfully",{id:"update-toast"}),l.reset()},onError:m=>{t(!1),console.error("Form submission error:",m),typeof m=="object"&&m!==null?Object.entries(m).forEach(([f,b])=>{Array.isArray(b)?b.forEach(U=>{x.error(`${f}: ${U}`,{id:"update-toast"}),l.setError(f,{type:"manual",message:U})}):typeof b=="string"&&(x.error(`${f}: ${b}`,{id:"update-toast"}),l.setError(f,{type:"manual",message:b}))}):x.error("Failed to update student data",{id:"update-toast"})},onFinish:()=>{t(!1),console.log("Request finished")}})})}return R()?e.jsx(Y,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(G,{className:"flex flex-col",children:[e.jsxs(J,{className:"text-left sm:px-6 space-y-1 bg-background z-40 p-4 border-b",children:[e.jsxs(Q,{className:"text-xl",children:["Update",e.jsx(o,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.name})]}),e.jsx(W,{className:"text-sm",children:"Fill in the details below to update the task"})]}),e.jsx(A,{form:l,isUpdated:!0,onSubmit:i,isPending:a,currentEmployee:s,children:e.jsxs(X,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx(Z,{disabled:a,asChild:!0,onClick:()=>l.reset(),children:e.jsxs(o,{disabled:a,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(u,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(o,{disabled:a,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[a&&e.jsx(u,{className:"animate-spin"}),"Update"]})]})})]})}):e.jsx(E,{...r,modal:!0,open:r.open,onOpenChange:r.onOpenChange,children:e.jsxs(M,{className:"flex flex-col gap-6 overflow-y-scroll",children:[e.jsxs(H,{className:"text-left sm:px-6 space-y-1 bg-background z-40 sticky top-0 p-4 border-b",children:[e.jsxs(L,{className:"text-lg",children:["Update",e.jsx(o,{type:"button",variant:"outline",className:"ml-2 px-2.5 text-base",children:s==null?void 0:s.name})]}),e.jsx(V,{className:"sr-only",children:"Fill in the details below to update the task"})]}),e.jsx(A,{form:l,onSubmit:i,isPending:a,currentEmployee:s,isUpdated:!0,children:e.jsxs(B,{className:"gap-3 px-3 py-4 w-full flex-row justify-end flex border-t sm:space-x-0",children:[e.jsx($,{disabled:a,asChild:!0,onClick:()=>l.reset(),children:e.jsxs(o,{disabled:a,type:"button",className:"w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(u,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(o,{disabled:a,className:"w-fit dark:bg-primary dark:text-primary-foreground bg-primary text-primary-foreground",size:"sm",children:[a&&e.jsx(u,{className:"animate-spin"}),"Update"]})]})})]})})}function _e({row:s}){const r=s.original,[p,d]=z.useState(!1),[a,t]=z.useState(!1),[h,l]=z.useState(!1),i=g=>{try{l(!0),F.delete(route("dashboard.users.destroy",g),{preserveScroll:!0,preserveState:!0,onBefore:()=>{l(!0)},onSuccess:()=>{x.success("Election deleted successfully"),t(!1),F.reload()},onError:n=>{console.error("Delete error:",n),x.error((n==null?void 0:n.message)||"Failed to delete the election")},onFinish:()=>{l(!1)}})}catch(n){console.error("Delete operation error:",n),x.error("An unexpected error occurred"),l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(o,{variant:"ghost",size:"icon",className:"data-[state=open]:bg-muted size-8",children:[e.jsx(ue,{}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(ae,{align:"end",className:"w-[160px]",children:[e.jsx(I,{onSelect:()=>d(!0),children:"Edit"}),e.jsxs(I,{variant:"destructive",onSelect:()=>t(!0),children:["Delete",e.jsx(re,{children:"⌘⌫"})]})]})]}),e.jsx(Ie,{task:r,open:p,onOpenChange:d}),e.jsx(Ce,{handledeDelete:i,processing:h,trigger:!1,students:r,open:a,onOpenChange:t})]})}const Oe=[{id:"select",header:({table:s})=>e.jsx("div",{className:"flex items-center  w-14 justify-center",children:e.jsx(O,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:r=>s.toggleAllPageRowsSelected(!!r),"aria-label":"Select all"})}),cell:({row:s})=>e.jsx("div",{className:"flex items-center  w-14 justify-center",children:e.jsx(O,{checked:s.getIsSelected(),onCheckedChange:r=>s.toggleSelected(!!r),"aria-label":"Select row"})}),enableSorting:!1,enableHiding:!1},{accessorKey:"nama",header:"nama",cell:({row:s})=>{const r=le();return e.jsxs("div",{className:"flex items-center w-45 gap-4  ",children:[e.jsxs(ne,{className:"  relative flex size-10 shrink-0 overflow-hidden rounded-full",children:[e.jsx(te,{src:s.original.avatar,alt:s.original.name}),e.jsx(oe,{className:"rounded-lg  h-full w-full text-center content-center bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:r(s.original.name)})]}),s.original.name]})},enableHiding:!1},{accessorKey:"Email",header:"Email",cell:({row:s})=>e.jsx("div",{className:"w-50",children:s.original.email})},{accessorKey:"role",header:"role",cell:({row:s})=>e.jsx("div",{className:"w-32",children:e.jsxs(De,{variant:"outline",className:"text-muted-foreground px-1.5",children:[s.original.role==="admind"?e.jsx(ie,{}):e.jsx(Ue,{}),s.original.role]})})},{accessorKey:"Created At",header:"Created At",cell:({row:s})=>e.jsx("div",{className:"w-20",children:s.original.created_at?new Date(s.original.created_at).toLocaleDateString():"N/A"})},{id:"actions",cell:({row:s})=>e.jsx(e.Fragment,{children:e.jsx(_e,{row:s})})}];function Re(){const[s,r]=j.useState(!1),[p,d]=j.useTransition(),[a,t]=j.useState(!1),h=R();window.location.pathname.split("/").filter(n=>n)[1];const i=q({mode:"onSubmit",defaultValues:{name:"",email:"",password:"",password_confirmation:"",role:"admind"},resolver:K(Ae)});function g(n){d(async()=>{t(!0);const c=new FormData;c.append("name",n.name),c.append("email",n.email),c.append("role",n.role),c.append("password",n.password),c.append("password_confirmation",n.password_confirmation),F.post(route("dashboard.users.store"),c,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onSuccess:()=>{i.reset(),r(!1),x.success("Calon created"),t(!1)},onError:m=>{console.error("Submit error:",m),x.error(`Error: ${Object.values(m).join(", ")}`),t(!1),i.reset()}})})}return h?e.jsxs(Y,{open:s,onOpenChange:r,modal:!0,children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:" bg-background",size:"sm",children:[e.jsx(_,{className:""}),e.jsx("span",{className:" sr-only",children:"Add New "})]})}),e.jsxs(G,{className:"flex flex-col  ",children:[e.jsxs(J,{className:"text-left sm:px-6 space-y-1 bg-background    p-4 border-b  ",children:[e.jsxs(Q,{className:" text-xl",children:["Add New ",e.jsx(o,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base",children:"Candidate"})," "]}),e.jsx(W,{className:" text-sm",children:"Fill in the details below to create a new task"})]}),e.jsx(A,{isPending:a,form:i,onSubmit:g,children:e.jsxs(X,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx(Z,{disabled:a,asChild:!0,onClick:()=>i.reset(),children:e.jsxs(o,{disabled:a,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(u,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(o,{type:"submit",disabled:a,className:"w-fit  !pointer-events-auto  dark:bg-primary  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[a&&e.jsx(u,{className:"animate-spin"}),"Add"]})]})})]})]}):e.jsxs(E,{open:s,onOpenChange:r,modal:!0,children:[e.jsx(de,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:" text-sm  bg-background",size:"sm",children:[e.jsx(_,{className:" mr-3 "}),"Add New"]})}),e.jsxs(M,{className:"flex flex-col gap-6 overflow-y-scroll ",children:[e.jsxs(H,{className:"text-left sm:px-6 space-y-1 bg-background z-30  sticky top-0   p-4 border-b  ",children:[e.jsxs(L,{className:" text-lg",children:["Add New ",e.jsx(o,{type:"button",variant:"outline",className:" ml-2  px-2.5 text-base capitalize",children:"CUsers"})," "]}),e.jsx(V,{className:" sr-only",children:"Fill in the details below to create a new task"})]}),e.jsx(A,{isPending:a,form:i,onSubmit:g,children:e.jsxs(B,{className:"gap-3 px-3 py-4 w-full flex-row justify-end  flex  border-t sm:space-x-0",children:[e.jsx($,{disabled:a,asChild:!0,onClick:()=>i.reset(),children:e.jsxs(o,{disabled:a,type:"button",className:"  w-fit",size:"sm",variant:"outline",children:[a&&e.jsx(u,{className:"animate-spin"}),"Cancel"]})}),e.jsxs(o,{disabled:a,type:"submit",className:"w-fit dark:bg-primary !pointer-events-auto  dark:text-primary-foreground  bg-primary text-primary-foreground ",size:"sm",children:[a&&e.jsx(u,{className:"animate-spin"}),"Add"]})]})})]})]})}function We({pagination:s,filters:r,flash:p,users:d}){return e.jsxs(ce,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"calc(var(--spacing) * 12)"},children:[e.jsx(me,{variant:"inset"}),e.jsxs(xe,{children:[e.jsx(pe,{siteName:"Elections"}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col px-7 gap-4 py-4 md:gap-6 md:py-6",children:[e.jsxs("header",{className:"flex justify-start  flex-col   space-y-1",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Adminds Team  Management"}),e.jsx("p",{className:" text-muted-foreground",children:"U can make another user/admind account, and then all that account can CRUD ur data"})]}),e.jsx(je,{createComponent:e.jsx(Re,{}),data:d,columns:Oe,pagination:s,filters:r,option:fe})]})})})]})]})}export{We as default};
