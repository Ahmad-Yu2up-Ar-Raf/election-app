import{r as c,R as N,j as e,m as z,t as I,$ as te}from"./app-9UtIOb6G.js";import{u as W,m as J,M as Y,a as ne,f as U,c as re,b as L,i as se,d as X,J as ae,B as ie,e as oe,S as le,g as x}from"./vote-button-CbXHkOft.js";import{a as ce,B as k,c as O}from"./button-ChhXiX7I.js";import{D as de,a as ue,b as me,c as fe,d as he,e as xe,f as pe,g as ge}from"./dialog-BmdUH5Pe.js";import{D as je,a as be,b as ye,c as we,d as ve,e as Ne,f as Ve,g as Ce,L as M,T as Se,C as De}from"./drawer-CK6ywJF8.js";import{u as q}from"./index-CIDt2uqx.js";import{P as Ee,T as Te}from"./bar-chart-83Qf4Wuy.js";import"./index-B5PMQak4.js";import"./index-BmPUkX9H.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Me=ce("EllipsisVertical",ke);function G(t){const n=W(()=>J(t)),{isStatic:r}=c.useContext(Y);if(r){const[,a]=c.useState(t);c.useEffect(()=>n.on("change",a),[])}return n}function K(t,n){const r=G(n()),a=()=>r.set(n());return a(),ne(()=>{const s=()=>U.preRender(a,!1,!0),i=t.map(l=>l.on("change",s));return()=>{i.forEach(l=>l()),re(a)}}),r}function Fe(t){L.current=[],t();const n=K(L.current,t);return L.current=void 0,n}function Le(...t){const n=!Array.isArray(t[0]),r=n?0:-1,a=t[0+r],s=t[1+r],i=t[2+r],l=t[3+r],o=se(s,i,l);return n?o(a):o}function Q(t,n,r,a){if(typeof t=="function")return Fe(t);const s=typeof n=="function"?n:Le(n,r,a);return Array.isArray(t)?_(t,s):_([t],([i])=>s(i))}function _(t,n){const r=W(()=>[]);return K(t,()=>{r.length=0;const a=t.length;for(let s=0;s<a;s++)r[s]=t[s].get();return n(r)})}function ze(t,n,r){const a=t.get();let s=null,i=a,l;const o=typeof a=="string"?a.replace(/[\d.-]/g,""):void 0,u=()=>{s&&(s.stop(),s=null)},d=()=>{u(),s=new ae({keyframes:[H(t.get()),H(i)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:l})};t.attach((m,j)=>(i=m,l=p=>j(A(p,o)),U.postRender(d),t.get()),u);let f;return X(n)&&(f=n.on("change",m=>t.set(A(m,o))),t.on("destroy",f)),f}function A(t,n){return n?t+n:t}function H(t){return typeof t=="number"?t:parseFloat(t)}function Ie(t,n={}){const{isStatic:r}=c.useContext(Y),a=()=>X(t)?t.get():t;if(r)return Q(a);const s=G(a());return c.useInsertionEffect(()=>ze(s,t,n),[s,JSON.stringify(n)]),s}function Oe({students:t,trigger:n=!0,open:r,processing:a=!1,handledeDelete:s,onOpenChange:i,...l}){const[o,u]=N.useState(!1),d=i?r:o,f=i||u;return q()?e.jsxs(je,{modal:!0,...l,open:d,onOpenChange:f,children:[n&&e.jsx(be,{asChild:!0,children:"Delete"}),e.jsxs(ye,{children:[e.jsxs(we,{children:[e.jsx(ve,{children:"Are you absolutely sure?"}),e.jsxs(Ne,{children:["This action cannot be undone. Your vote will permanently added for this "," ",e.jsx("span",{className:"font-medium",children:"Candidate Vote "}),t.nama," to our servers."]})]}),e.jsxs(Ve,{className:"gap-2 sm:space-x-0",children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(k,{variant:"outline",disabled:a,children:["   ",a&&e.jsx(M,{className:"mr-2 size-4 animate-spin","aria-hidden":"true"})," Cancel"]})}),e.jsxs(k,{"aria-label":"Delete selected rows",variant:"default",onClick:()=>s(t.id),disabled:a,children:[a&&e.jsx(M,{className:"mr-2 size-4 animate-spin","aria-hidden":"true"}),"Vote!"]})]})]})]}):e.jsxs(de,{...l,modal:!0,open:d,onOpenChange:f,children:[n&&e.jsx(ue,{asChild:!0,children:e.jsx(Se,{})}),e.jsxs(me,{children:[e.jsxs(fe,{children:[e.jsx(he,{children:"Are you absolutely sure?"}),e.jsxs(xe,{children:["This action cannot be undone. Your vote will permanently added for this "," ",e.jsx("span",{className:"font-medium",children:"Candidate Vote "}),t.nama," to our servers."]})]}),e.jsxs(pe,{className:"gap-2 sm:space-x-0",children:[e.jsx(ge,{asChild:!0,children:e.jsxs(k,{variant:"outline",disabled:a,children:["   ",a&&e.jsx(M,{className:"mr-2 size-4 animate-spin","aria-hidden":"true"})," Cancel"]})}),e.jsxs(k,{"aria-label":"Delete selected rows",variant:"default",onClick:()=>s(t.id),disabled:a,children:[a&&e.jsx(M,{className:"mr-2 size-4 animate-spin","aria-hidden":"true"}),"Vote!"]})]})]})]})}const R=[{primary:"#262626",gradient:"linear-gradient(145deg, #262626, #171717)",text:"#FFFFFF"},{primary:"#171717",gradient:"linear-gradient(145deg, #171717, #000000)",text:"#FFFFFF"}];function B({Calon:t,election:n}){const[r,a]=c.useState(!1),[s,i]=N.useState(!1),l=c.useMemo(()=>Math.abs(t.id)%R.length,[t.id]),o=R[l],[u,d]=N.useState(!1),f=()=>{d(!0),n.status==="ongoing"&&(a(!0),z.post(route("vote.store",n.id),{calon_id:t.id,election_id:n.id},{preserveScroll:!0,onSuccess:()=>{I.success("Vote berhasil!"),z.visit(route("vote.index"))},onError:p=>{I.error(p.message||"Gagal melakukan vote"),a(!1)},onFinish:()=>{a(!1),d(!1)}}))},m=q(),j=()=>{m&&i(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>j(),className:"relative w-full max-w-xs h-[370px] overflow-hidden group mx-auto dark:bg-black bg-white dark:border-0 border rounded-lg dark:text-white text-black flex flex-col",style:{borderColor:o.primary},children:[e.jsx("div",{className:"w-full h-full",children:e.jsx("img",{src:`/${t.picture}`,alt:t.nama,width:400,height:500,className:"h-full w-full grayscale-100 group-hover:grayscale-0 scale-105 group-hover:scale-100 object-cover transition-all duration-300 rounded-md"})}),e.jsx("article",{className:"p-8 w-full h-full  z-10 absolute top-0 flex flex-col justify-end  opacity-0 group-hover:opacity-100 transition-all duration-300",style:{background:` ${o.primary}`},children:e.jsxs("div",{className:"translate-y-10 group-hover:translate-y-0 transition-all duration-300 space-y-2",children:[e.jsx("h1",{className:"md:text-2xl font-semibold",children:"Vision & Mision"}),e.jsx("p",{className:"  text-accent-foreground/90 text-sm   leading-5.5",children:t.visi}),n.status==="ongoing"&&e.jsx(ie,{onClick:()=>i(!0),disabled:r,className:" px-5  mt-5  w-[9em]",children:r?"Processing...":"Vote Now"})]})}),e.jsxs("article",{className:"p-4 w-full h-[50%] flex flex-col justify-end  overflow-hidden  absolute bottom-0 rounded-b-md bg-gradient-to-t from-black  opacity-100 group-hover:opacity-0 group-hover:-bottom-4 transition-all duration-300",children:[e.jsx("h1",{className:"md:text-2xl font-semibold",children:t.nama}),e.jsx("p",{className:"sm:text-base text-sm",children:t.kelas})]})]}),e.jsx(Oe,{trigger:!1,processing:u,open:s,onOpenChange:i,students:t,handledeDelete:f})]})}function $(t,n){let r;return(...a)=>{window.clearTimeout(r),r=window.setTimeout(()=>t(...a),n)}}function _e({debounce:t,scroll:n,polyfill:r,offsetSize:a}={debounce:0,scroll:!1,offsetSize:!1}){const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,l]=c.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=c.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i,orientationHandler:null}),u=t?typeof t=="number"?t:t.scroll:null,d=t?typeof t=="number"?t:t.resize:null,f=c.useRef(!1);c.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[m,j,p]=c.useMemo(()=>{const h=()=>{if(!o.current.element)return;const{left:b,top:g,width:C,height:y,bottom:S,right:D,x:E,y:T}=o.current.element.getBoundingClientRect(),v={left:b,top:g,width:C,height:y,bottom:S,right:D,x:E,y:T};o.current.element instanceof HTMLElement&&a&&(v.height=o.current.element.offsetHeight,v.width=o.current.element.offsetWidth),Object.freeze(v),f.current&&!Be(o.current.lastBounds,v)&&l(o.current.lastBounds=v)};return[h,d?$(h,d):h,u?$(h,u):h]},[l,a,u,d]);function w(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(h=>h.removeEventListener("scroll",p,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function V(){o.current.element&&(o.current.resizeObserver=new s(p),o.current.resizeObserver.observe(o.current.element),n&&o.current.scrollContainers&&o.current.scrollContainers.forEach(h=>h.addEventListener("scroll",p,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const F=h=>{!h||h===o.current.element||(w(),o.current.element=h,o.current.scrollContainers=Z(h),V())};return He(p,!!n),Ae(j),c.useEffect(()=>{w(),V()},[n,p,j]),c.useEffect(()=>w,[]),[F,i,m]}function Ae(t){c.useEffect(()=>{const n=t;return window.addEventListener("resize",n),()=>void window.removeEventListener("resize",n)},[t])}function He(t,n){c.useEffect(()=>{if(n){const r=t;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[t,n])}function Z(t){const n=[];if(!t||t===document.body)return n;const{overflow:r,overflowX:a,overflowY:s}=window.getComputedStyle(t);return[r,a,s].some(i=>i==="auto"||i==="scroll")&&n.push(t),[...n,...Z(t.parentElement)]}const Re=["x","y","top","bottom","left","right","width","height"],Be=(t,n)=>Re.every(r=>t[r]===n[r]),ee={type:"spring",stiffness:280,damping:18,mass:.3};function P({value:t,place:n}){const r=Math.floor(t/n)%10,a=J(r),s=Ie(a,ee);return c.useEffect(()=>{s.set(r)},[s,r]),e.jsxs("div",{className:"relative inline-block  w-[1ch] overflow-x-visible overflow-y-clip leading-none tabular-nums",children:[e.jsx("div",{className:"invisible",children:"0"}),Array.from({length:10},(i,l)=>e.jsx($e,{mv:s,number:l},l))]})}function $e({mv:t,number:n}){const r=c.useId(),[a,s]=_e(),i=Q(t,l=>{if(!s.height)return 0;const o=l%10,u=(10+n-o)%10;let d=u*s.height;return u>5&&(d-=10*s.height),d});return s.height?e.jsx(oe.span,{style:{y:i},layoutId:`${r}-${n}`,className:"absolute inset-0  flex items-center justify-center",transition:ee,ref:a,children:n}):e.jsx("span",{ref:a,className:"invisible absolute",children:n})}function Pe({value:t,padStart:n=!1,decimalSeparator:r="."}){const a=Math.abs(t),[s,i]=a.toString().split("."),l=parseInt(s,10),u=(n&&l<10?`0${s}`:s).split(""),d=u.map((f,m)=>Math.pow(10,u.length-m-1));return e.jsxs("div",{className:"flex items-center ",children:[t<0&&"-",u.map((f,m)=>e.jsx(P,{value:l,place:d[m]},`pos-${d[m]}`)),i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:r}),i.split("").map((f,m)=>e.jsx(P,{value:parseInt(i,10),place:Math.pow(10,i.length-m-1)},`decimal-${m}`))]})]})}const We=({targetDate:t})=>{const n=()=>{const i=+new Date(t)-+new Date;let l={};return i>0&&(l={days:Math.floor(i/864e5),hours:Math.floor(i/36e5%24),minutes:Math.floor(i/1e3/60%60),seconds:Math.floor(i/1e3%60)}),l},[r,a]=c.useState(n());c.useEffect(()=>{const i=setTimeout(()=>{a(n())},1e3);return()=>clearTimeout(i)});const s=[];return Object.keys(r).forEach(i=>{r[i]&&s.push(e.jsxs("div",{className:" flex  content-start items-start flex-row ",children:[e.jsxs("div",{className:"  flex-col flex  items-center",children:[e.jsx(Pe,{value:r[i],padStart:!0},i),e.jsx("span",{className:" text-muted-foreground text-sm lg:text-base",children:i})]}),i!="seconds"&&e.jsx(Me,{className:"text-zinc-400 size-7 mt-4 mx-2  h-fit"})]}))}),e.jsx("div",{children:s.length?e.jsx("div",{className:"flex text-[3.5em]  relative  justify-center items-center gap-0.5 font-mono",children:s}):e.jsx("span",{children:"Time's up!"})})};function et({election:t,candidates:n,votes:r,largest:a}){console.log(r);const[s,i]=N.useState(!1),[l,o]=N.useState(!1),[u,d]=c.useState(!1),[f,m]=c.useState(0),[j,p]=c.useState(0),[w,V]=c.useState(0),[F,h]=c.useState(0);return c.useEffect(()=>{const b=new Date(t.end_date),g=setInterval(()=>{const C=new Date(t.start_date),y=b.getTime()-C.getTime(),S=Math.floor(y/(1e3*60*60*24));m(S);const D=Math.floor(y%(1e3*60*60*24)/(1e3*60*60));p(D);const E=Math.floor(y%(1e3*60*60)/(1e3*60));V(E);const T=Math.floor(y%(1e3*60)/1e3);h(T),S<=0&&D<=0&&E<=0&&T<=0&&d(!0)},1e3);return()=>clearInterval(g)},[f,j,w,F]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{title:`Vote - ${t.title}`,children:[e.jsx("link",{rel:"preconnect",href:"https://fonts.bunny.net"}),e.jsx("link",{href:"https://fonts.bunny.net/css?family=instrument-sans:400,500,600",rel:"stylesheet"})]}),e.jsxs("section",{className:"relative content-center flex-col flex min-h-dvh w-full overflow-hidden rounded-md bg-black/[0.96] antialiased md:items-center md:justify-center",children:[e.jsx("div",{className:O("pointer-events-none absolute inset-0 opacity-50 [background-size:40px_40px] select-none","[background-image:linear-gradient(to_right,#171717_1px,transparent_1px),linear-gradient(to_bottom,#171717_1px,transparent_1px)]")}),e.jsx(le,{className:"-top-80 -left-30 md:-top-72 md:left-60",fill:"white"}),e.jsxs("section",{className:"relative min-h-dvh container content-center z-10 mx-auto w-full max-w-7xl p-4 pt-20 md:pt-0",children:[e.jsx(x,{duration:1,direction:"up",delay:1,inView:!0,children:e.jsx("h1",{className:"bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-7xl",children:t.title})}),e.jsx(x,{duration:1,direction:"up",delay:1.5,inView:!0,children:e.jsx("p",{className:"mx-auto mt-4 max-w-lg text-center text-sm md:text-base font-normal text-neutral-300",children:t.description||"Welcome to the voting platform! Here you can find all the candidates for the election. please give your best vote."})}),!s&&e.jsx(x,{duration:1,delay:3,direction:"up",inView:!0,className:" flex hover:bg-muted-foreground/25 justify-center border border-accent-foreground/15  pt-1.5  rounded-full  transform -translate-x-1/2 left-1/2  absolute  bottom-7",children:e.jsx("a",{href:"#candidate",children:e.jsx(De,{className:"animate-bounce text-2xl  text-accent-foreground/90 mx-auto mt-4"})})})]}),e.jsx("section",{id:"candidate",className:"min-h-dvh mt-30 py-30   h-full",children:e.jsxs("main",{className:"container gap-15 md:gap-17 max-w-[70em] mx-auto relative  flex flex-col items-center justify-center ",children:[e.jsxs("header",{className:"flex space-y-3  flex-col items-center justify-center px-4 py-2",children:[e.jsx(x,{duration:1,direction:"up",delay:.5,inView:!0,children:e.jsx("h1",{className:" bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-5xl ",children:"The Candidate"})}),e.jsx(x,{duration:1,onAnimationComplete:()=>i(!0),direction:"up",delay:.7,inView:!0,children:e.jsx("p",{className:"  px-10 text-center   text-muted-foreground",children:"Pls select the best choise , from the bottom of your heart "})})]}),s&&e.jsx("section",{className:O("w-full  grid grid-cols-1 md:grid-cols-2 lg:gap-6  gap-20 px-4",n.length>2?" lg:grid-cols-3":"lg:grid-cols-2"),children:n.length>0&&n.map((b,g)=>e.jsx(x,{duration:1,direction:"up",delay:g*.8,onAnimationComplete:()=>g===n.length-1&&o(!0),inView:!0,children:e.jsx(B,{election:t,Calon:b})},g))})]})}),t.status==="finished"?e.jsxs(e.Fragment,{children:[e.jsx("section",{id:"result",className:"min-h-dvh mt-30 py-30   h-full",children:e.jsxs("main",{className:"container gap-15 md:gap-17  mx-auto relative  flex flex-col items-center justify-center ",children:[e.jsxs("header",{className:"flex space-y-3  flex-col items-center justify-center px-4 py-2",children:[e.jsx(x,{duration:1,direction:"up",delay:.5,inView:!0,children:e.jsx("h1",{className:" bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-5xl ",children:"The Result"})}),e.jsx(x,{duration:1,direction:"up",delay:.7,inView:!0,children:e.jsx("p",{className:"  px-10 text-center   text-muted-foreground",children:" This is the final result from the elections "})})]}),e.jsxs("div",{className:"*:data-[slot=card]:from-primary/5 *:data-[slot=card]:to-card dark:*:data-[slot=card]:bg-card grid grid-cols-1 md:grid-cols-2 gap-10 px-4 *:data-[slot=card]:bg-gradient-to-t *:data-[slot=card]:shadow-xs lg:px-6 @xl/main:grid-cols-2 ",children:[e.jsx(x,{duration:1,direction:"up",delay:1,inView:!0,children:e.jsx(Ee,{calon:n})}),e.jsx(x,{duration:1,direction:"up",delay:2,inView:!0,children:e.jsx(Te,{calon:n})})]})]})}),e.jsx("section",{id:"winner",className:"min-h-dvh mt-30 py-30   h-full",children:e.jsxs("main",{className:"container gap-15 md:gap-17  mx-auto relative  flex flex-col items-center justify-center ",children:[e.jsxs("header",{className:"flex space-y-3  flex-col items-center justify-center px-4 py-2",children:[e.jsx(x,{duration:1,direction:"up",delay:.5,inView:!0,children:e.jsx("h1",{className:"  bg-opacity-50 bg-gradient-to-b m-auto max-w-[10em] from-neutral-50 to-neutral-400 bg-clip-text text-center text-4xl font-bold text-transparent md:text-5xl ",children:"The Winner"})}),e.jsx(x,{duration:1,direction:"up",delay:.7,inView:!0,children:e.jsx("p",{className:"  px-10 text-center   text-muted-foreground",children:" This is the winner from the elections "})})]}),n.length>0&&n.map((b,g)=>{if(b.votes_count>=a)return e.jsx(x,{duration:1,direction:"up",delay:g*.8,onAnimationComplete:()=>g===n.length-1&&o(!0),inView:!0,children:e.jsx(B,{election:t,Calon:b})},g)})]})})]}):e.jsx("section",{id:"countdown",className:"min-h-dvh  content-center  h-full",children:e.jsx(x,{duration:1,direction:"up",delay:.5,inView:!0,children:e.jsx(We,{targetDate:t.end_date})})})]})]})}export{et as default};
